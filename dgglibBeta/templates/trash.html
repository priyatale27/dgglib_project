{%load static %}
<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{%static 'css/bootstrap_latest/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{%static 'css/digital_locker.css'%}">
    <link rel='stylesheet' href="{%static 'css/nprogress.css'%}">

    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
        href="https://blogfonts.com/css/aWQ9MTUzMjQ5JnN1Yj0yNDkmYz1mJnR0Zj1GdXR1cmFQVEJvbGQub3RmJm49ZnV0dXJhLXB0/Futura PT.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUzMjQ5JnN1Yj0yNDkmYz1mJnR0Zj1GdXR1cmFQVExpZ2h0Lm90ZiZuPWZ1dHVyYS1wdC0xOQ/Futura PT.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">



    <title>DggLib</title>
    <style>
        /* For edit icon */
        .sd_edit_icon {
            float: right !important;
            position: relative !important;
            top: -197px !important;
        }

        .fa-pencil-square-o {
            color: white;
            font-size: 20px;
        }

        .dropdown-toggle::after {
            content: none !important;
        }

        .dropdown-menu {
            left: -153px !important;
        }
        .restore-all {
          border: 1px solid black;
          outline-style: solid;
          outline-color: #4476b3;
          outline-width: thick;

        }
    </style>
</head>

<body>
    <header class="digital_locker_header">
        <div class="digital_locker_heading">
            DggLib
        </div>
    </header>

    <main>
        <div id="result"></div>
        <section class="section_pading_top" style="position:relative; min-height: 850px;">
            <div class="container-fluid col_padding_dl">
                <p class="user_name">Welcome , {{current_user_name_display}} <span><i class="fas fa-edit"
                            id="updt_name_btn" style="cursor: pointer;color: rgb(238, 76, 48)"></i></span></p>

                <div class="row">
                    <div class="col-md-3 col_padding_dl_col" id="modal_add">
                        <div class="digital_locker_box_left">
                            {%if profile_pic%}
                            <div class="new_profile_pic">
                                <img id="profile_pic_image" src="{{profile_pic.url}}" alt=""
                                    class="digital_locker_box_icon">
                            </div>

                            {%else%}
                            <div class="new_profile_pic">
                                <img id="profile_pic_image" src="{%static 'images/inner1_NEW.png'%}" alt=""
                                    class="digital_locker_box_icon">
                            </div>

                            {%endif%}


                            <!--User Picture delete button-->
                            <!--
                                <a href="/delete_pic">
                            <button type="button" class="btn btn-primary btn-sm btn-block custom_button" style="margin-top: 35px"id="delete_btn1">DELETE</button>
                        </a>
                        -->
                            <!--User picture delete button ends here-->
                        </div>
                        <span class="sd_edit_icon">
                            <div class="dropdown ">
                                <a class="dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <!-- <a class="dropdown-item" id="updt_name_btn" style="cursor: pointer;">Update Name</a> -->
                                    <a class="dropdown-item" id="updt_pass_btn" style="cursor: pointer;">Update
                                        password</a>
                                    <a class="dropdown-item" id="update_btn1" style="cursor: pointer;">Update pic</a>
                                    <a class="dropdown-item" id="fgt_pass_btn" style="cursor: pointer;">Forgot Password</a>
                                    <a class="dropdown-item" id="delete_btn1" style="cursor: pointer;">Delete pic</a>
                                </div>
                            </div>

                        </span>
                        <!--
                        <button type="button" class="btn btn-primary btn-sm btn-block custom_button" style="margin-top: 5px" id="update_btn1">UPDATE</button>
                        
                        <a href='/delete_pic'>
                        <button type="button" class="btn btn-primary btn-sm btn-block custom_button" style="margin-top: 5px"id="delete_btn1">DELETE</button>
                        </a>
                        -->
                        <!--modal section-->
                        <!--Modal: Login / Register Form-->
                        <div class="modal fade" id="modalLRForm" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog cascading-modal" role="document">
                                <!--Content-->
                                <div class="modal-content">

                                    <!--Modal cascading tabs-->
                                    <div class="modal-c-tabs">

                                        <!-- Nav tabs -->
                                        <ul class="nav nav-tabs md-tabs tabs-2 light-blue darken-3" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active "
                                                    style="font-family: 'Josefin Sans', sans-serif;" data-toggle="tab"
                                                    href="#panel7" role="tab"></i>
                                                    ADD</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link " style="font-family: 'Josefin Sans', sans-serif;"
                                                    data-toggle="tab" href="#panel8" role="tab"></i>
                                                    CREATE</a>
                                            </li>
                                        </ul>

                                        <!-- Tab panels -->
                                        <div class="tab-content">
                                            <!--Panel 7-->
                                            <div class="tab-pane fade in show active" id="panel7" role="tabpanel">

                                                <!--Body-->
                                                <h4 class="modal-title" style="color:#4476b3;text-align:center">Add
                                                    Folder</h4>
                                                <div class="modal-body mb-1">
                                                    <form id="add_folder_form" method="post"
                                                        enctype="multipart/form-data">
                                                        <div class="md-form form-sm mb-5">
                                                            {% csrf_token %}
                                                            <input id="add_folder_user_id" type="text"
                                                                name="add_user_id" style="display: none;" />
                                                            <input type="file" name="files"
                                                                onchange="selectFolder(event)" id="files" multiple=""
                                                                directory="" webkitdirectory="" mozdirectory="">
                                                        </div>
                                                        <div class="text-center mt-2">
                                                            <button type="button"
                                                                class="btn btn-primary btn-lg btn-block custom_button"
                                                                id="add_folder_btn">Add </button>
                                                        </div>
                                                    </form>
                                                </div>
                                                <!--Footer-->
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="btn btn-outline-info waves-effect ml-auto"
                                                        data-dismiss="modal">Close</button>
                                                </div>

                                            </div>
                                            <!--/.Panel 7-->

                                            <!--Panel 8-->
                                            <div class="tab-pane fade" id="panel8" role="tabpanel">

                                                <!--Body-->
                                                <h4 class="modal-title" style="color:#4476b3;text-align:center">Create
                                                    Folder</h4>
                                                <div class="modal-body">
                                                    <form id="create_folder_form" method="post"
                                                        enctype="multipart/form-data">
                                                        <div class="md-form form-sm mb-5">
                                                            {% csrf_token %}
                                                            <input id="create_folder_user_id" type="text"
                                                                name="create_user_id" style="display: none;" />
                                                            <input type="text" id="modalLRInput12"
                                                                name="create_folder_name"
                                                                placeholder="Enter Folder Name.."
                                                                class="form-control form-control-lg validate">
                                                        </div>

                                                        <div class="text-center form-sm mt-2">
                                                            <button type="button"
                                                                class="btn btn-primary btn-lg btn-block custom_button"
                                                                id="create_folder_btn">Create</i></button>
                                                        </div>
                                                    </form>
                                                </div>
                                                <!--Footer-->
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="btn btn-outline-info waves-effect ml-auto"
                                                        data-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            <!--/.Panel 8-->
                                        </div>

                                    </div>
                                </div>
                                <!--/.Content-->
                            </div>
                        </div>
                        <!--Modal: Login / Register Form-->

                        <!-- modal section -->

                        <!--image preview section-->
                        <div id="MyModalNewProfile" class="modal_prfile_pic">
                            <span class="image_close">&times;</span>
                            <img class="modal-content1" id="img01">
                            <div id="caption"></div>
                        </div>
                        <!--image preview section -->


                        <!--profile pic upload modal-->
                        <div id="uploadModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Update Profile Picture</h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form id="image" Method="POST" enctype="multipart/form-data"
                                            action="/update_pic/">
                                            {% csrf_token %}
                                            <input id="user_id" type="text" name="user_id" style="display: none;" />
                                            <input id="profile_pic" type="file" name="profile_pic" /></br><br>
                                            <button type="button" class="btn btn-info" id="update_btn">update</button>
                                        </form>
                                        <!-- Preview-->
                                        <div id='preview'></div>
                                    </div>

                                </div>

                            </div>
                        </div>


                        <!-- change foldername modal -->
                        <div id="updatefolderModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Update Folder Name</h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form id="update_foldername_form">
                                        <!-- action="{% url 'update_foldername'%}" Method="POST">
                                            {% csrf_token %} -->

                                            <input id="folder_id" type="text" name="folder_id" style="display: none;" />
                                            <div class="form-group ">
                                                <input type="text" class="form-control" id="foldername"
                                                    name="foldername" value="" style=" color: #3b63e6;"/>

                
                                            </div>
                                            
                                        </form>
                                        <button id="update_foldername_btn" type="button" class="btn btn-info">update</button>
                                        
                                        <!-- Preview-->

                                    </div>

                                </div>

                            </div>
                        </div>
                        <!-- change foldername modal-->

                        <!-- change filename modal -->
                        <div id="updatefileModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Update File Name</h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form id="update_filename_form">
                                        <!-- action="{% url 'filenameupdate'%}" Method="POST">
                                            {% csrf_token %} -->

                                            <input id="file_folder_id" type="text" name="folder_id"
                                                style="display: none;" />
                                            <input id="file_file_id" type="text" name="file_id"
                                                style="display: none;" />

                                            <div class="form-group ">
                                                <input type="text" class="form-control" id="filename" name="filename"
                                                    value="" style=" color: #3b63e6;"/>                
                                            </div>
                                            
                                        </form>
                                        <button id="update_filename_btn" type="button" class="btn btn-info">update</button>
                                        
                                        <!-- Preview-->

                                    </div>

                                </div>

                            </div>
                        </div>
                        <!-- change filename modal-->


                        <!-- change username modal -->
                        <div id="updateuserModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Update Profile Name</h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form action="{% url 'update_username'%}" Method="POST">
                                            {% csrf_token %}
                                            <input id="user_name_id" type="text" name="user_id"
                                                style="display: none;" />
                                            <div class="form-group ">
                                                <input type="text" class="form-control" id="username" name="username"
                                                    value="{{current_user_name_display}}" style=" color: #3b63e6;">

                                                </span>
                                            </div>
                                            <button type="submit" class="btn btn-info">update</button>
                                        </form>
                                        <!-- Preview-->

                                    </div>

                                </div>

                            </div>
                        </div>
                        <!-- change username modal-->

                        <!-- change password modal -->
                        <div id="updatepassModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Update Password </h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form id="change_password_form" Method="POST" enctype="multipart/form-data"
                                            action="">
                                            <!--action="{% url 'update_password'%}">
                                            {% csrf_token %}-->
                                            <input id="pass_user_id" type="text" name="user_id"
                                                style="display: none;" />
                                            <div class="form-group input_group_spacing">
                                                <input type="text" class="form-control" id="p_pass" name="p_pass"
                                                    placeholder="Previous Password" style=" color: #b6b6b6;">
                                            </div>
                                            <div class="form-group input_group_spacing">
                                                <input type="password" class="form-control" id="password"
                                                    name="password" placeholder="Password" style=" color: #b6b6b6;">
                                            </div>
                                            <div class="form-group input_group_spacing">
                                                <input type="password" class="form-control" id="cnf_pass"
                                                    name="cnf_pass" placeholder="Confirm Password"
                                                    style=" color: #b6b6b6;">
                                            </div>
                                            <button type="button" class="btn btn-info"
                                                id="update_pass_btn">update</button>
                                        </form>
                                        <!-- Preview-->

                                    </div>

                                </div>

                            </div>
                        </div>
                        <!-- change password modal -->
                        <!-- change password modal -->
                        <div id="forgetpassModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                        
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" style="color:#4476b3">Forget Password </h4>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Form -->
                                        <form id="forget_form" Method="POST" enctype="multipart/form-data" action="">
                                            {% csrf_token %}
                                            <input id="pass_user_id" type="text" name="user_id" style="display: none;" />
                                            <div class="form-group input_group_spacing">
                                                <input type="text" class="form-control" id="exampleInputEmail1" name="user_id"
                                                    placeholder="Enter Your Email"" style=" color: #b6b6b6;">
                                            </div>
                                            <button type="button" class="btn btn-info" id="chn_btn2">Forgot Password</button>
                        
                                        </form>
                                        <!-- Preview-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--profile pic upload modal-->

                        <!--share file to people modal-->
                        <!-- Modal -->
                        <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false"
                            tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="staticBackdropLabel"></h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="share_people_form" method="POST">

                                            <!-- Modal tab section strat for file share inside a folder -->

                                            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link active" id="pills-home_staticbackdrop-tab"
                                                        data-toggle="pill" href="#pills-home_staticbackdrop" role="tab"
                                                        aria-controls="pills-home_staticbackdrop"
                                                        aria-selected="true">Registered People</a>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="pills-profile_staticbackdrop-tab"
                                                        data-toggle="pill" href="#pills-profile_staticbackdrop"
                                                        role="tab" aria-controls="pills-profile_staticbackdrop"
                                                        aria-selected="false">Non Registered people</a>
                                                </li>

                                            </ul>
                                            <div class="tab-content" id="pills-tabContent">
                                                <div class="tab-pane fade show active" id="pills-home_staticbackdrop"
                                                    role="tabpanel" aria-labelledby="pills-home_staticbackdrop-tab">

                                                    <!-- inner tab sections code start -->
                                                    <div class="col col_padding_design">
                                                        <span class="seachch_in"><img
                                                                src="{%static 'images/search_b.png'%}" alt=""
                                                                class="dgl_s_image"></span><input type="Search"
                                                            class="form-control_de" placeholder="Search People">
                                                    </div>
                                                    <div>
                                                        <div class="d-flex bd-highlight my-3 py-2 modal_header_bg">
                                                            <div
                                                                class="p-2 bd-highlight modal_header_content hash_content_width">
                                                                #
                                                            </div>
                                                            <div class="p-2 bd-highlight modal_header_content">Name
                                                            </div>
                                                            <div class="ml-auto p-2 bd-highlight modal_header_content">
                                                                Checkbox
                                                            </div>
                                                        </div>
                                                        {%for user in share_people%}
                                                        <div class="d-flex bd-highlight  py-2 modal_header_bg_b">
                                                            <div
                                                                class="p-2 bd-highlight modal_header_content hash_content_width">
                                                                {{forloop.counter}}
                                                            </div>
                                                            <div class="p-2 bd-highlight modal_header_content">
                                                                {{user.user_id}}
                                                            </div>
                                                            <div class="ml-auto p-2 bd-highlight modal_header_content">
                                                                <div class="form-check">
                                                                    <input
                                                                        class="form-check-input share_pp share_people_cls"
                                                                        type="checkbox" name="checkbox_f"
                                                                        value="{{user.id}}"
                                                                        id="defaultCheck{{forloop.counter}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        {%endfor%}
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary"
                                                            id="shared_people_btn">Send</button>

                                                        <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal" id="share_modal_close">Close</button>

                                                    </div>


                                                    <!-- inner tab sections code end -->
                                                </div>
                                                <div class="tab-pane fade" id="pills-profile_staticbackdrop"
                                                    role="tabpanel" aria-labelledby="pills-profile_staticbackdrop-tab">
                                                    <!-- tab for non registered people file sharing inside folder start -->

                                                    <div class="alert alert-success" style="display: none;"
                                                        id="shared_file_success_div">
                                                        <strong>Success!</strong> <Span id="shared_file_success_msg"></Span>.
                                                    </div>
                                                    <form id="non_register_share_file_form" method="POST">
                                                        {% csrf_token %}
                                                        <div class="col col_padding_design">
                                                            <div class="form-group">

                                                                <input type="email" name="email" class="form-control"
                                                                    id="shared_file_email_id"
                                                                    aria-describedby="emailHelp"
                                                                    placeholder="Enter email">

                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-primary"
                                                                id="shared_file_non_register_file_btn">Send</button>
                                                            <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal"
                                                                id="share_modal_close">Closes</button>


                                                        </div>
                                                    </form>
                                                    <!-- tab for non registered people file sharing inside folder end -->
                                                </div>

                                            </div>

                                            <!-- Modal tab section end -->




                                        </form>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!--share file to people modal-->


                        <!--share folder to people modal-->
                        <!-- Modal -->
                        <div class="modal fade" id="staticBackdrop1" data-backdrop="static" data-keyboard="false"
                            tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="staticBackdropLabel"></h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- tab design for folder share start -->
                                        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active" id="pills-home_registered_people-tab"
                                                    data-toggle="pill" href="#pills-home_registered_people" role="tab"
                                                    aria-controls="pills-home_registered_people"
                                                    aria-selected="true">Registered_People</a>
                                            </li>
                                            <!-- <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="pills-profile_non_registered-tab" data-toggle="pill"
                                                    href="#pills-profile" role="tab" aria-controls="pills-profile"
                                                    aria-selected="false">Non_Registered_People</a>
                                            </li> -->
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="pills-contact-tab" data-toggle="pill"
                                                    href="#pills-contact" role="tab" aria-controls="pills-contact"
                                                    aria-selected="false">Non_Registered_People</a>
                                            </li>

                                        </ul>
                                        <div class="tab-content" id="pills-tabContent">
                                            <div class="tab-pane fade show active" id="pills-home_registered_people"
                                                role="tabpanel" aria-labelledby="pills-home_registered_people-tab">
                                                <form id="share_people_form" method="POST">
                                                    <div class="col col_padding_design">
                                                        <span class="seachch_in"><img
                                                                src="{%static 'images/search_b.png'%}" alt=""
                                                                class="dgl_s_image"></span><input type="Search"
                                                            class="form-control_de" placeholder="Search People">
                                                    </div>
                                                    <div id="registerd_user_list">
                                                        <div class="d-flex bd-highlight my-3 py-2 modal_header_bg">
                                                            <div
                                                                class="p-2 bd-highlight modal_header_content hash_content_width for_folder_sharing">
                                                            
                                                            </div>
                                                            <div class="p-2 bd-highlight modal_header_content">Name
                                                            </div>
                                                            <div class="ml-auto p-2 bd-highlight modal_header_content">
                                                                Checkbox
                                                            </div>
                                                        </div>
                                                        {%for user in share_people%}
                                                        <div class="d-flex bd-highlight  py-2 modal_header_bg_b">
                                                            <div
                                                                class="p-2 bd-highlight modal_header_content hash_content_width">
                                                                {{forloop.counter}}
                                                            </div>
                                                            <div class="p-2 bd-highlight modal_header_content">
                                                                {{user.user_id}}
                                                            </div>
                                                            <div class="ml-auto p-2 bd-highlight modal_header_content">
                                                                <div class="form-check">
                                                                    <input class="form-check-input share_pp"
                                                                        type="checkbox" name="checkbox"
                                                                        value="{{user.id}}"
                                                                        id="defaultCheck{{forloop.counter}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        {%endfor%}
                                                    </div>

                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary"
                                                            id="shared_folder_people_btn">Send</button>
                                                        <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal" id="share_modal_close">Close</button>

                                                    </div>
                                                </form>
                                            </div>
                                            <div class="tab-pane fade" id="pills-contact" role="tabpanel"
                                                aria-labelledby="pills-contact-tab">
                                                <div class="alert alert-success" style="display: none;"
                                                    id="shared_folder_success_div">
                                                    <strong>Success!</strong> <Span id="shared_folder_success_msg"></Span>.
                                                </div>
                                                <form id="non_register_share_people_folderss" method="POST">
                                                    <div class="col col_padding_design">
                                                        <div class="form-group">

                                                            <input type="email" name="email" class="form-control"
                                                                id="shared_mail_id" aria-describedby="emailHelp"
                                                                placeholder="Enter email">

                                                        </div>
                                                    </div>


                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary"
                                                            id="shared_folder_non_register_people_btn">Send</button>
                                                        <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal" id="share_modal_close">Close</button>
                                                    </div>
                                                </form>
                                            </div>
                                            

                                        </div>
                                        <!-- tab design for folder share end -->

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--share folder to people modal-->

                        <!--  hidden input box for remainig bytes of login user -->
                        {%if remaining_size%}
                        <input type="text" id="remaining_size_input" name="remaining_size" value="{{remaining_size}}"
                            style="display: none;" />
                        {%endif%}
                        <!--  hidden input box for remainig bytes of login user -->
                        {%if default_size%}
                        <input type="text" id="default_size_input" name="default_size" value="{{default_size}}"
                            style="display: none;" />
                        {%endif%}
                        <!--  hidden input box for userlimit bytes of login user -->

                        <!--  hidden input box for remainig bytes of login user -->

                        <!-- manually created folder's add item modal  -->
                        {%for item in result%}
                        <div class="modal fade nprogresss" id="modalForm_{{item.folder_id}}" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header text-center">
                                        <h4 class="modal-title w-100 font-weight-bold" style="color:#4476b3">Add Items
                                        </h4>
                                        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button> -->
                                    </div>
                                    <div class="modal-body mx-3">
                                        <form method="POST" id="form_{{item.folder_id}}" enctype="multipart/form-data">
                                            <div class="md-form mb-5">
                                                {% csrf_token %}
                                                <input type="text" name="item_folder_id" value="{{item.folder_id}}"
                                                    style="display: none;" />
                                                <input type="file" name="files" id="item_files{{item.folder_id}}"
                                                    multiple>
                                            </div>
                                    </div>
                                    <div class="modal-footer d-flex justify-content-center">
                                        <button type="button" class="btn btn-primary btn-lg btn-block custom_button"
                                            onclick="addFile({{item.folder_id}},{{item.user_id}})">Add files</button>
                                    </div>
                                    <form>
                                </div>
                            </div>
                        </div>
                        {%endfor%}


                        <!-- manually created folder's add item modal  -->

                        <!-- last box -->
                        <div class="last_box_digital_locker">
                            <div class="lastbox_inner_padding">
                                <div class="flex-container" id="add_btn" style="cursor :pointer;">
                                    <div>
                                        <img src="{%static 'images/add_bttun.png'%}" alt="">
                                    </div>
                                    <div class="edit_add_item">
                                        Add/Create Folder
                                    </div>
                                </div>
                                <!-- box items -->
                                <ul class="nav" id="pills-tab">
                                    <!-- <li class="nav-item my_library_de">
                                        <a class="nav-link  active" id="pills-home-tab" style="color:#646464;"
                                            data-toggle="pill" href="/home" role="tab" aria-controls="pills-home"
                                            aria-selected="true">My Dashboard </a>
                                    </li> -->
                                    <li class="nav-item my_library_de">
                                        <a class="nav-link" id="pills-home-tab" style="color:#646464;"
                                             href="/home" >My Dashboard </a>
                                    </li>
                                    <li class="nav-item my_library_de1">
                                        <a class="nav-link" id="pills-profile-tab"
                                            style="color:#646464;" href="/members" >Members</a>
                                    </li>
                                    <!--   -->
                                    <!--<li class="nav-item my_library_de1">
                                        <a class="nav-link" id="pills-contact-tab"
                                            style="color:#646464;" href="#pills-contact" role="tab"
                                            aria-controls="pills-contact" aria-selected="false">My Folders</a>
                                    </li>-->
                                    <li class="nav-item my_library_de1">
                                        <a class="nav-link" id="pills-beta-tab"
                                            style="color:#646464;" href="/beta">Beta Features</a>
                                    </li>
                                    <!--there -->
                                    <li class="nav-item my_library_de1">
                                        <a class="nav-link" id="pills-Quadra-tab"
                                            style="color:#646464;" href="/shared"
                                            aria-controls="pills-Quadra" aria-selected="false">Shared Items</a>
                                    </li>
                                    <li class="nav-item my_library_de2">
                                        <a class="nav-link active" id="pills-Sovrana-tab"
                                            style="color:#646464;" href="/trash" >Trash</a>
                                    </li>

                                </ul>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-6 col_padding_dl_col_right custom_main_content_height">
                        <div class="digital_locker_right_top">
                            <div class="container">
                                <form>
                                    <div class="row row_padding_design">
                                        <div class="col-md-3 col_padding_design">
                                            <span class="seachch_in"><img src="{%static 'images/search_b.png'%}" alt=""
                                                    class="dgl_s_image"></span><input type="Search"
                                                class="form-control_de" id="search_people" placeholder="Search People">
                                        </div>
                                        <div class="col-md-3 col_padding_design">
                                            <span class="seachch_in1"><img src="{%static 'images/folder_d.png'%}" alt=""
                                                    class="dgl_s_image1"></span><input type="Search"
                                                class="form-control_de1" id="search_folder" placeholder="Search Folder">
                                        </div>
                                    </form>
                                        <!-- for feedback button  -->
                                        <div class="col-md-3 col_padding_design" >
                                            <!--feedback  -->
                                            <!-- Trigger the modal with a button -->
                                            <div style="float:right"> 
                                            <button type="button" class="btn btn-light btn-rounded btn-danger_logout"
                                                data-toggle="modal" data-target="#feedModal">Feedback</button>
                                            </div>
                                            <!-- Modal -->
                                            <div class="modal fade" id="feedModal" role="dialog">
                                                <div class="modal-dialog">

                                                    <!-- Modal content-->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <!--button type="button" class="close" data-dismiss="modal">&times;</button-->
                                                            <h4 class="modal-title">Feedback</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form id="feedback_form" Method="POST"
                                                                enctype="multipart/form-data" action="">

                                                                <div class="form-group">
                                                                    <label for="feedmail">Email address</label>
                                                                    <input type="email" class="form-control"
                                                                        id="feedmail" placeholder="name@example.com"
                                                                        name="feedmail">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="feedtext">Feedback</label>
                                                                    <textarea class="form-control" id="feedtext"
                                                                        rows="4" name="feedtext"></textarea>
                                                                </div>
                        
                                                            </form>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button id="feedback_btn" type="button"
                                                                class="btn btn-default" data-dismiss="">Submit</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <!--feedback-->
                                        </div>
                                        <!-- feedback button end -->

                                        <div class="col-md-3 col_padding_design1">
                                            <div class="logout_f">
                                                <button type="button"
                                                    class="btn  btn-light btn-rounded btn-danger_logout"
                                                    id="logout_btn">Log Out</button>
                                            </div>
                                        </div>
                                
                            </div>
                        </div>
                        <!-- </div> -->

                        <!-- after top folder part -->

                        <div id="pills-tabContent">

                            <!-- <div id="pills-Sovrana" style="margin-top: 50px;">
                            
                                <div class="pagination_set_height">
                                <div class="d-flex bd-highlight mb-3 py-3 trash_header_bg">
                                    <div class="mr-auto p-2 bd-highlight">
                                        <div class="flex-container">
                                            <div class="trash_value deleted_header_text delete_paad">#</div>
                                            <div class="deleted_header_text delete_paad">Deleted File</div>
                                        </div>
                                    </div>
                                    <div class="p-2 bd-highlight deleted_header_text deleted_file_width">
                                        
                                        <button type="button" class="btn btn-outline-info"
                                            id="select_all_btn">Delete All</button>
                                    </div>
                                    
                                    <div class="p-2 bd-highlight deleted_header_text for_icon_retive  delete_paad1">
                                        <i class="fa fa-trash" style="color:#DC143C;cursor:pointer;font-size: 20px;"
                                            aria-hidden="true" onclick="trash_del()"></i>
                                    </div>
                                </div>
                                <div id="trash_tab_section">
                                    {%for item in delete_folder_file%}
                                    <div class="d-flex bd-highlight  py-3 trash_border_bottom">
                                        <div class="mr-auto p-2 bd-highlight">
                                            <div class="flex-container">
                                                <div class="trash_value deleted_row_text">{{forloop.counter}}</div>
                                                <div class="deleted_row_text">{{item.folder}}</div>
                                            </div>
                                        </div>
                                        <div class="p-2 bd-highlight deleted_row_text deleted_file_width">
                                            {{item.file_name|truncatechars:16}}</div>
                                        <div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a
                                                href="{{item.file_url}}" target="_blank"><i class="fa fa-download"
                                                    style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a>
                                        </div>

                                        
                                        <div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a
                                                value="{{item.file_id}}" target="_blank"><i class="fa fa-undo"
                                                    onclick="trash_retrieve({{item.file_id}})"
                                                    style="color:#0a6916;cursor:pointer" aria-hidden="true"></i></a>
                                        </div>
                                        
                                        <div class="p-2 bd-highlight deleted_row_text for_icon_retive">
                                            <div class="form-group form-check">
                                                <input type="checkbox"
                                                    class="form-check-input trash_check checkbox_checked"
                                                    name="trash_file_checked" value="{{item.file_id}}">
                                            </div>
                                        </div>
                                    </div>
                                    {%endfor%}
                                </div>

                            </div> -->
                            <!-- ####  pagination design start  ####-->

                            <!-- <div class="blog_bottom_pagination" style="text-align:center">
                                
                                <button class="paginate left pglb" id="trash_left_btn"><i
                                        class="fa fa-angle-double-left" style="font-size: 40px;"></i></button>
                                <button class="paginate right pgrb" id="trash_right_btn">
                                    <i class="fa fa-angle-double-right" style="font-size: 40px;"></i>
                                </button>
                            </div> -->
                            <!-- ####  pagination design end ####-->
                            <!-- </div> -->
                                <!--quadra tab end-->

                                <div id="pills-Quadra">
                                    <div class="pagination_set_height">
                                        <div class="scroll_div">
                                            <div class="after_top_right_side_margin" id="append_dashboard_div">
                                                {% if trash_data_show == True %}
                                                	<button  style="margin-left: 81%; background-color:white;" class="btn restore-all" id="restoreButton" onclick="restoreFiles()">Restore All</button>
                                                {% endif %}
<!--                                                <div class=" bd-highlight">-->
<!--                                                        <a href="#/" id="file_folder_resrore"><i-->
<!--                                                                class='fa fa-window-restore'-->
<!--                                                                onclick="item_delete({{item.folder_id}})"-->
<!--                                                                style='font-size:22px;color:#708090;margin-left: 96%;'></i></a>-->
<!--                                                </div>-->
                                                <!-- 1 acc button -->
                                                {%for item in shared_item_list%}
                                                
                                                <div class="d-flex bd-highlight">
                                                    <div class=" flex-grow-1 bd-highlight">
                                                        <span class="for_data">
                                                            {{item.file_count}} files/{{item.file_size}}
                                                        </span>
                                                        <button id="{{item.folder_id}}"
                                                            class="accordion">{{item.folder_name|truncatechars:16}} </button>
                                                        <div class="panel" id="main_panel_{{item.folder_id}}">
                                                            <div style="margin-top: 20px;margin-bottom: 20px;">
        
                                                                <div class="d-flex bd-highlight ">
                                                                    <div class="flex-grow-1 bd-highlight">
        
                                                                        <div class="flex-container" id="{{item.folder_id}}">
                                                                          
                                                                        </div>
        
                                                                    </div>
                                                                    <div class="bd-highlight">
                                                                        <a href="#/" id="file_folder_trash"><i
                                                                                class='fa fa-window-restore'
                                                                                onclick="item_restore({{item.file_id}})"
                                                                                style='font-size:22px;color:#708090;margin-top: 38%;' title="Restore"></i></a>
                                                                    </div>
                                                                     <div class=" bd-highlight file_del_icon">
                                                                        <a href="#/" id="file_folder_r"><i
                                                                                class='fas fa-trash-alt'
                                                                                onclick="item_delete({{item.folder_id}})"
                                                                                style='font-size:22px;color:#708090;' title="Delete"></i></a>
                                                                    </div>
                                                                    <div class=" bd-highlight file_share_icon">
                                                                        <a href="#/" id="file_folder_share"><i
                                                                                class="fa fa-share"
                                                                                onclick="item_share({{item.file_id}})"
                                                                                style='font-size:22px;color:#00FA9A;'
                                                                                aria-hidden="true" title="Share"></i></a>
                                                                    </div>
                                                                </div>
                                                                <!-- highchart inner -->
                                                                <div>
                                                                    <div id="chart_container_shared_{{item.folder_name}}"
                                                                        style="width: 75%;height: 300px;"></div>
        
                                                                </div>
        
                                                            </div>
                                                            <div id="panel_{{item.folder_id}}">
                                                               
                                                                {%for items in item.file%}
                                                                
                                                                <div style="margin-top:15px;">
                                                                    <div>
                                                                        <!--new start-->
                                                                        <div class="d-flex bd-highlight cc_bc_pb">
                                                                            <div class="p-2 flex-grow-1 bd-highlight">
                                                                                <div class="flex-container">
                                                                                    <div>
                                                                                        {% if items.file_name%}
                                                                                        {% if '.png' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%elif '.jpg' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%elif '.jpeg' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%elif '.JPG' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%elif '.JPEG' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%elif '.PNG' in items.file_name %}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank"><img
                                                                                                src="{{items.file_url}}" alt=""
                                                                                                class="ppp_ccc_image">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%else%}
                                                                                        <a href="{{items.file_url}}"
                                                                                            target="_blank">{{items.icon|safe}}</a>
                                                                                        {%endif%}
                                                                                        {%else%}
                                                                                        <a href="/"
                                                                                            onclick=" return false;">{{items.icon|safe}}
                                                                                        </a>
                                                                                        {%endif%}
                                                                                    </div>
                                                                                    <div class="items">
                                                                                        {{items.file_name}}<span
                                                                                            onclick="change_file_name({{item.folder_id}},{{items.file_id}},'{{items.file_name}}')"><i
                                                                                                class="fas fa-edit"
                                                                                                style="cursor: pointer;color: rgb(238, 76, 48);"></i></span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            
                                                                            <div class="p-2 bd-highlight">
                                                                                <div class="form-group form-check">
                                                                                    <input type="checkbox"
                                                                                        class="form-check-input check_style file_delete_share"
                                                                                        name="file_checked"
                                                                                        value="{{items.file_id}}"
                                                                                        id="file_checked_{{items.file_id}}">
                                                                                </div>
                                                                            </div>
                                                                        </div>
        
                                                                    </div>
                                                                    <!--new end-->
                                                                </div>
                                                                {%endfor%}
                                                            </div>
                                                        </div>
                                                        <!--panel end div-->
                                                    </div>
                                                    <div class=" bd-highlight f_del_icn"><i class='fas fa-trash-alt'
                                                            onclick="trash_folder_del('{{item.folder_name}}')"
                                                            style='font-size:20px;color:#708090;' title="Delete"></i></div>
                                                    <div class=" bd-highlight"><i class='fa fa-window-restore'
                                                            onclick="trash_folder_restore('{{item.folder_name}}')"
                                                            style='font-size:20px;color:#708090; margin-top:337%;margin-left: -20%;' title="Restore"></i></div>
                                                    <div class=" bd-highlight f_share_icn"><i class="fa fa-share"
                                                            onclick="folder_share('{{item.folder_name}}')"
                                                            style='font-size:20px;color:#00FA9A;' aria-hidden="true" title="Share"></i></div>
                                                </div>
        
                                                {%endfor%}
                                                <!--end acc -->
                                            </div>
                                        </div>
    
                                    </div>
                                    
                                </div>    
                                
                            <div id="pills-profile" style="display: none; margin-top: 50px;">
                                <div class="pagination_set_height_member">
                                    <div class="d-flex bd-highlight mb-1 bdhs">
                                        <div class="p-4 bd-highlight wccccc">#</div>
                                        <div class="p-4 bd-highlight name_text">Name</div>
                                        <div class="ml-auto p-4 bd-highlight pp_d">Profile Picture</div>
                                    </div>
                                    <div id="my_people_tab_section"></div>
                                </div>
                            </div>

                        </div>

                        

                    </div>
                </div>
                <div class="col-md-3">
                    <div class="file_information_outer_graph">
                        {{total_folder}} FOLDERS/{{total_files}} FILES/ {{real_filefolder_size}}
                    </div>
                    <div class="graph_outer">
                        <div id="chart_container" style="width: 75%;height: 300px;">
                            <!-- <canvas id="pie-chart"></canvas> -->
                        </div>
                    </div>

                </div>

            </div>
            </div>
            <!-- </div>
            </div> -->
        </section>
        <section>
            <div id="loader" class="loader_background_design" style="display:none;">
                <div class=" image_main_loader">
                    <img src="{%static 'images/Ripple-1s-200px (3).gif'%}" style="width: 10rem; height: 10rem;" alt="">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div id="loader1" class="loader_background_design" style="display:none;">
                <div class=" add_folder_loader">
                    <img src="{%static 'images/Ripple-1s-200px (3).gif'%}" style="width: 10rem; height: 10rem;" alt="">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div id="loader2" class="loader_background_design" style="display:none">
                <div class=" add_folder_loader">
                    <img src="{%static 'images/Ripple-1s-200px (3).gif'%}" style="width: 10rem; height: 10rem;" alt="">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div id="loader3" class="loader_background_design" style="display:none;">
                <div class=" add_file_loader">
                    <img src="{%static 'images/Ripple-1s-200px (3).gif'%}" style="width: 10rem; height: 10rem;" alt="">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <!-- <div class="progress">
                <div class="bar"></div >
                <div class="percent">0%</div >
            </div> -->
        </section>
    </main>
    <footer class="digital_locker_footer">
        <div class="container digital_locker_footer_padding">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer_col_inner_padding">
                        <div class="d_f_about">About</div>
                        <div class="about_us_text">
                            <a href="" class="about_us_text1">
                                About Us
                            </a>
                        </div>
                        <div class="about_us_text">
                            <a href="" class="about_us_text1">
                                Work Here
                            </a>
                        </div>
                        <div class="about_us_text">
                            <a href="" class="about_us_text1">
                                How to Use
                            </a>
                        </div>
                        <div class="about_us_text">
                            <a href="" class="about_us_text1">
                                Security
                            </a>
                        </div>

                    </div>
                </div>
                <div class="col-md-4">
                    <div class="d_f_about">Help</div>
                    <div class="about_us_text">
                        <a href="" class="about_us_text1">
                            My Account
                        </a>
                    </div>
                    <div class="about_us_text">
                        <a href="" class="about_us_text1">
                            My Documents
                        </a>
                    </div>
                    <div class="about_us_text">
                        <a href="" class="about_us_text1">
                            My Folder
                        </a>
                    </div>
                    <div class="about_us_text">
                        <a href="" class="about_us_text1">
                            Bookmarked
                        </a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div>
                        <div class="d-flex flex-row-reverse bd-highlight">
                            <div class=" bd-highlight d_l_f_t">
                                DggLib
                            </div>
                        </div>
                    </div>

                    <div class="  d_l_f_t1">
                        Copy rights © 2021, a product of Dongargarh Labs
                    </div>

                    <div class="d-flex flex-row-reverse bd-highlight">


                        <div class=" bd-highlight social_icon"><i class="fab fa-youtube"></i></div>
                        <div class=" bd-highlight social_icon"><i class="fab fa-pinterest-p"></i></div>
                        <div class=" bd-highlight social_icon"><i class="fab fa-linkedin-in"></i></div>
                        <div class=" bd-highlight social_icon"><i class="fab fa-facebook-f"></i></div>
                    </div>

                </div>



            </div>
        </div>
        </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{%static 'js/jquery-3.5.1.slim.min.js'%}"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="{%static 'js/popper.min.js'%}"></script>
    <script src="{%static 'js/bootstrap.min.js'%}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="{%static 'js/nprogress.js'%}"></script>




    <script>


        function change_folder_name(folder_id, foldername) {
            $('#folder_id').val(folder_id)
            $('#foldername').val(foldername)
            $('#updatefolderModal').modal('show')
        }

        function change_file_name(folder_id, file_id, file) {
            $('#file_folder_id').val(folder_id)
            $('#file_file_id').val(file_id)
            file = file.split('.');
            filename = file[0]
            $('#filename').val(filename)
            $('#updatefileModal').modal('show')
        }


        //-- this portions deals with folders button section --//
        var acc = document.getElementsByClassName("accordion");
        var i;
        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            });
        }
        //-- end  --//
    </script>
<!--forgot password email send-->
<script>
    $(document).ready(function () {
        $('#chn_btn2').click(function () {
            $('#spinner').show()
            var formdata = new FormData(document.getElementById('forget_form'));
            if (formdata != "") {
                $.ajax({
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "forget_pass_ajax" %}',
                    dataType: 'json',
                    data: formdata,
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        $('#spinner').hide()
                        console.log(data['status'])
                        if (data['status'] == 'success') {
                            // $("#result").html(data['message']);
                            // $("#result").addClass("alert alert-success");
                            // $("#result").show();
                            // $("#danger").hide();
                            $('#forgetpassModal').modal('hide');
                            $.alert('Please check your mail')

                        }

                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                        // $('#spinner').hide()
                        // $("#danger").html("Please enter your correct registerd email");
                        // $("#danger").addClass("alert alert-danger");
                        // $("#danger").show();
                        // $("#result").hide();
                    },
                });
            }

        });

    });

</script>




<script>
        $(function () {
            Highcharts.chart('chart_container', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie'
                },
                title: {
                    text: ''
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                accessibility: {
                    point: {
                        valueSuffix: '%'
                    }
                },
				credits: {
                     enabled: false
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    name: 'Types',
                    colorByPoint: true,
                    data: {{ graph_data_outer| safe}}
                }]
            });

        

            // shared highchart
        {%for item in type_graph_result_shared %}
        Highcharts.chart('chart_container_shared_{{item.folder_id}}', {
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            credits: {
                     enabled: false
					 },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            accessibility: {
                point: {
                    valueSuffix: '%'
                }
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                // name: 'Brands',
                colorByPoint: true,
                data: {{ item.graph | safe }}
                }],

            });
        {% endfor %}

        });


        

    </script>


    <script>
        //-- taking value from localstorage and put them into respictive hidden input box and in the profile pic section --//
        var token = localStorage.getItem("token");
        $('#user_id').val(token)
        $('#pass_user_id').val(token)
        $('#user_name_id').val(token)
        $('#add_folder_user_id').val(token)
        $('#create_folder_user_id').val(token)
        $('#logout_btn').val(token)
        var remaining_size = localStorage.getItem("remaining_size");
        var default_size = localStorage.getItem("default_size");
        $('#remaining_size_input').val(remaining_size)
        $('#default_size_input').val(default_size)
       // $('#feedback_btn').val(token)
        //-- end  --//
    </script>

    <script>
        //--upload profile image modal open  --//
        $('#update_btn1').click(function () {
            $('#uploadModal').modal('show')
        });
        // end //

        // upload profile name modal open //

        $('#updt_name_btn').click(function () {
            $('#updateuserModal').modal('show')
        });
        //-- end --//

        // upload password modal open //

        $('#updt_pass_btn').click(function () {
            $('#updatepassModal').modal('show')
        });
        //-- end --//
        
        // forget password mail send button//
        $('#fgt_pass_btn').click(function () {
            $('#forgetpassModal').modal('show')
            });


        //-- button click ajax fire for image upload --//
        $('#update_btn').click(function () {
            $('#loader').show()
            var formdata = new FormData(document.getElementById('image'));
            var image = formdata.get('profile_pic')
            if (image.name != "") {
                $.confirm({
                    title: 'Confirm to upload image',
                    buttons: {
                        confirm: function () {
                            $("#image").submit();
                        },
                        cancel: function () {
                            $('#loader').hide()
                            $.alert('Canceled!');
                            $('#profile_pic').val(function () {
                                return this.defaultValue;
                            });
                            $('#uploadModal').modal('hide')
                        },
                    }
                });

            } else {
                $('#loader').hide()
                $.alert("Please choose a Picture")
            }
        })
        //-- end  --//

        //-- button click ajax fire for user name upload --//
        $('#update_name_btn').click(function () {
            var username = $('#username').val()
            alert(username)
            if (username != "") {
                $.confirm({
                    title: 'Confirm to Change Name',
                    buttons: {
                        confirm: function () {
                            $("#change_name_form").submit();
                        },
                        cancel: function () {
                            $('#loader').hide()
                            $.alert('Canceled!');
                            $('#username').val(function () {
                                return this.defaultValue;
                            });
                            $('#updateuserModal').modal('hide')
                        },
                    }
                });

            } else {
                $('#loader').hide()
                $.alert("Please choose a Name For You")
            }
        })
        //-- end  --//



       //update folder button//
       $('#update_foldername_btn').click(function () {
           //console.log('update button clicked') 
           //folder_id
           //foldername
           //to send 
           var formdata = new FormData(document.getElementById('update_foldername_form'));
           var foldername= formdata.get('foldername')
           var folderid= formdata.get('folder_id')
           console.log(foldername,folderid)

           if (foldername!= ""){
               $.ajax({
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: "{% url 'update_foldername'%}",
                    dataType: 'json',
                    data: formdata,
                    headers: {
                           'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                           if (data['status'] == 'Failed') {
                               //console.log('old password unmatched');
                               $.alert('Folder Already Exists')
                               
                               
                           }
                           else if (data['status'] == 'Success') {
                               //$.alert('Folder name Changed ')
                               
                               $(location).attr('href', "{% url 'index'%}")
                           }
                       },


               })
           }
           
       })

       //update file button//
       $('#update_filename_btn').click(function () {
           //console.log('update button clicked') 
           //folder_id
           //foldername
           //to send 
           var formdata = new FormData(document.getElementById('update_filename_form'));
           var filename= formdata.get('file_file_id')
           //var folderid= formdata.get('folder_id')
           console.log(filename)
           if (filename!= ""){
               $.ajax({
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: "{% url 'filenameupdate'%}",
                    dataType: 'json',
                    data: formdata,
                    headers: {
                           'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                           if (data['status'] == 'Failed') {
                               //console.log('old password unmatched');
                               $.alert('File Already Exists')
                               
                               
                           }
                           else if (data['status'] == 'Success') {
                               $.alert('File name Changed ')                               
                               $(location).attr('href', "{% url 'index'%}")
                           }
                       },


               })
           }
           
       })


        //-- button click ajax fire for password change --//
        $('#update_pass_btn').click(function () {
            //undo point
            //undo point remove
            //var url="{% url 'update_password'%}"
            $('#loader').show()
            var formdata = new FormData(document.getElementById('change_password_form'));
            var password = formdata.get('password')
            var passwrd = formdata.get('cnf_pass')
            //alert('Change password?')
            //console.log(password,passwrd)
            if (password != "") {
                $.confirm({
                    title: 'Confirm to Change Password',
                    buttons: {
                        confirm: function () {
                            $.ajax({
                                type: 'POST',
                                cache: false,
                                contentType: false,
                                processData: false,
                                url: "{% url 'update_password'%}",
                                dataType: 'json',
                                data: formdata,
                                headers: {
                                    'X-CSRFToken': '{{csrf_token}}'
                                },
                                success: function (data) {
                                    if (data['status'] == 'Failed') {
                                        //console.log('old password unmatched');
                                        $.alert('Check Old Password')
                                        $('#password').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#cnf_pass').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#p_pass').val(function () {
                                            return this.defaultValue;
                                        });
                                    }
                                    else if (data['status'] == 'Success') {
                                        $.alert('Password Changed ')
                                        $('#password').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#cnf_pass').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#p_pass').val(function () {
                                            return this.defaultValue;
                                        });
                                        //$(location).attr('href', "{% url 'index'%}")
                                    }
                                },

                            });
                            $('#loader').hide()

                            //$("#change_password_form").submit();
                            //$("#change_password_form").ajaxSubmit({url: url, type: 'post'})
                        },
                        cancel: function () {
                            $('#loader').hide()
                            $.alert('Canceled!');
                            $('#password').val(function () {
                                return this.defaultValue;
                            });
                            $('#cnf_pass').val(function () {
                                return this.defaultValue;
                            });
                            $('#p_pass').val(function () {
                                return this.defaultValue;
                            });
                            $('#updatepassModal').modal('hide')
                        },
                    }
                });

            } else {
                $('#loader').hide()
                $.alert("Please Fill Password")
            }
        })
        //-- end  --//



        //-- button click ajax fire for password change --//
        /*  $('#feedback_btn').click(function () {
               $('#loader').show()
               var formdata = new FormData(document.getElementById('change_password_form'));
               var password = formdata.get('password')
               alert(password)
           })*/
        //-- end  --//


        // delete user pic //

        $('#delete_btn1').click(function () {
            $.confirm({
                title: 'Do You Want to delete Pic',
                // content: 'Simple confirm!',
                buttons: {
                    confirm: function () {
                        // $('#delete_btn1'). attr("href");
                        // $('#delete_btn1').attr('href','/delete_pic')
                        $.ajax({
                            type: 'POST',
                            url: '{% url "deletpicture" %}',
                            dataType: 'json',
                            // data:{
                            //     item_id:data
                            // },
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            success: function (data) {
                                console.log(data['status'])
                                var url = "{% url 'index' %}"
                                window.location.href = url
                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                    },
                    cancel: function () {
                        $.alert('Canceled!');
                    },
                }
            });

        })

        // end //
    </script>

    <script>
        // Get the modal
        var modal = document.getElementById("MyModalNewProfile");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById("profile_pic_image");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function () {
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("image_close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
    </script>

    <script>
        //-- modal show section for add or create folder --//
        $('#add_btn').click(function () {
            $('#modalLRForm').modal('show')
        })
        //-- end  --//

        //-- taking folder name from choose file section, means whenever user uploading whole folder by choose file input it takes the folder name --//
        var folder_name = ""

        function selectFolder(e) {
            var theFiles = e.target.files;
            var relativePath = theFiles[0].webkitRelativePath;
            var folder = relativePath.split("/");
            folder_name = folder[0];
        }
        //-- end  --//


        //-- whole folder upload ajax section --//
        $('#add_folder_btn').click(function () {
            var user_remainig_size = parseInt($('#remaining_size_input').val())
            var user_default_size = parseInt($('#default_size_input').val())
            var total_size = 0;
            $('#loader1').show()
            var user_id = $('#add_folder_user_id').val()
            var total_file_size = document.getElementById('files');
            for (var i = 0; i <= total_file_size.files.length - 1; i++) {
                var fsize = Math.round((total_file_size.files.item(i).size) / 1024);
                total_size = total_size + fsize;
            }
            var form_data = new FormData()
            var totalfiles = document.getElementById('files').files.length;
            for (var index = 0; index < totalfiles; index++) {
                form_data.append("files", document.getElementById('files').files[index]);
            }
            form_data.append("folder_name", folder_name)
            form_data.append("add_user_id", user_id)
            form_data.append("total_size", total_size)
            if (parseInt(user_remainig_size) > parseInt(total_size)) {

                if (form_data != "" && totalfiles != "") {
                    $.ajax({
                        beforeSend: function () {
                            NProgress.start();
                        },
                        type: 'POST',
                        cache: false,
                        contentType: false,
                        processData: false,
                        url: '{% url "add_folder" %}',
                        dataType: 'json',
                        data: form_data,
                        headers: {
                            'X-CSRFToken': '{{csrf_token}}'
                        },
                        success: function (data) {
                            NProgress.done();
                            NProgress.remove();
                            $('.nav a[href="#pills-home"]').tab('show');
                            $('#loader1').hide()
                            $('#modalLRForm').modal('hide')
                            $('#files').val(function () {
                                return this.defaultValue;
                            });
                            var add_folder_name = data[0]
                            var add_folder_id = data[1]
                            var add_folder_logon_user_id = data[2]
                            var folder_count = data[3]
                            var remaining_size_response = parseInt(data[4])
                            var default_size_response = parseInt(data[5])
                            $('#remaining_size_input').val(remaining_size_response)
                            $('#default_size_input').val(default_size_response)
                            localStorage.setItem("remaining_size", remaining_size_response);
                            localStorage.setItem("default_size", default_size_response);
                            var panel_append_id = '#panel_' + add_folder_id
                            var add_compile_data;

                            //  first created basic folder structure and append it to append_dashboard_div everytime on success//
                            var add_compile_data = '<button id="' + add_folder_id +
                                '" class="accordion" >' + add_folder_name + '</button>' +
                                '<div class="panel" id="main_panel_' + add_folder_id + '">' +
                                '<div style="margin-top: 20px;margin-bottom: 20px;">' +
                                '<div class="flex-container deai" id="' + add_folder_id +
                                '" onclick="modal_open(' + add_folder_id + ')">' +
                                '<div>' +
                                '<img src="{%static "images/add_bttun.png" %}" alt="">' +
                                '</div>' +
                                '<div class="edit_add_item">' +
                                'Add Item' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div id="panel_' + add_folder_id + '">' +
                                '<div>' +
                                '</div>'
                            $('#append_dashboard_div').append(add_compile_data)

                            // this code checks the current accordion class //
                            var acc = document.getElementsByClassName("accordion");
                            var j;
                            for (i = 0; i < acc.length; i++) {
                                j = i;
                                if (acc[i].classList.contains("active"))
                                    break;
                            }
                            // adding click functionality to current according class and adding style element to its next element//
                            acc[j].addEventListener("click", function () {
                                this.classList.toggle("active");
                                var panel = this.nextElementSibling;
                                if (panel.style.maxHeight) {
                                    panel.style.maxHeight = null;
                                } else {
                                    panel.style.maxHeight = panel.scrollHeight + "px";
                                }
                            });

                            //folder already created now adding files to the folder that is currently created //
                            if (data.length > 0) {
                                for (var i = 5, total = data.length; i < total; i++) {
                                    var file_compile_data1;
                                    var file_id = data[i].item_id
                                    file_compile_data1 = '<div style="margin-top:15px;">' +
                                        '<div><!--new start-->' +
                                        '<div class="d-flex bd-highlight cc_bc_pb">' +
                                        '<div class="p-2 flex-grow-1 bd-highlight">' +
                                        '<div class="flex-container">' +
                                        '<div>' +
                                        '<a href="' + data[i].item +
                                        '" target="_blank"><img src="' + data[i].item +
                                        '"  alt="" class="ppp_ccc_image">' + data[i].icon + '</a>' +
                                        '</div>' +
                                        '<div class="items">' + data[i].file_name + '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete(' +
                                        file_id +
                                        ')" style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/"><i class="fa fa-window-restore" onclick ="item_restore(' +
                                        file_id +
                                        ')" style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/" id="abc"><i class="fa fa-share"  onclick ="item_share(' +
                                        file_id +
                                        ')" style="font-size:22px;color:#00FA9A;"" aria-hidden="true"></i></a>' +
                                        '</div>' +
                                        '</div>' +
                                        '</div><!--new end-->' +
                                        '</div>'

                                    $(panel_append_id).append(file_compile_data1);
                                }

                            }

                            // new modal created with dynamic form every time a folder created //
                            var new_modal = '<div class="modal fade" id="modalForm_' +
                                add_folder_id +
                                '" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">' +
                                '<div class="modal-dialog" role="document">' +
                                '<div class="modal-content">' +
                                '<div class="modal-header text-center">' +
                                '<h4 class="modal-title w-100 font-weight-bold">Add Items</h4>' +
                                '<button type="button" class="close" data-dismiss="modal" aria-label="Close">' +
                                '<span aria-hidden="true">&times;</span>' +
                                '</button>' +
                                '</div>' +
                                '<div class="modal-body mx-3">' +
                                '<form method="POST" id="form_' + add_folder_id +
                                '"enctype="multipart/form-data">' +
                                '<div class="md-form mb-5">' +
                                '{% csrf_token %}' +
                                '<input type="text" name="item_folder_id" value="' + add_folder_id +
                                '" style="display: none;"/>' +
                                '<input type="file" name="files" id="item_files' + add_folder_id +
                                '" multiple>' +
                                '</div>' +

                                '</div>' +
                                '<div class="modal-footer d-flex justify-content-center">' +
                                '<button type="button" class="btn btn-primary btn-lg btn-block custom_button" onclick="addFile(' +
                                add_folder_id + ',' + add_folder_logon_user_id +
                                ')">Add files</button>' +
                                '</div>' +
                                '<form>' +
                                '</div>' +
                                '</div>' +
                                '</div>'

                            $('#modal_add').append(new_modal)
                            // append folders in my folder section, when whole folder created //
                            var append_folders = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                                '<div class="p-4 bd-highlight wccccc1">' + folder_count + '</div>' +
                                '<div class="p-4 bd-highlight wccccc2">' + add_folder_name +
                                '</div>' +
                                '<div class="ml-auto p-4 bd-highlight folder_icon">' +
                                '<div class="flex-container">' +
                                '<div class="pp_d px-4">' +
                                '<a href="#/"><i class="fas fa-trash-alt" onclick="folder_del(' +
                                add_folder_id +
                                ')" style="font-size:22px;color:#708090;"></i></a>' +
                                '</div>' +
                                '<div class="pp_d">' +
                                '<a href="#/" id="abc"><i class="fa fa-share" onclick="folder_share(' +
                                add_folder_id +
                                ')" style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '</div>'


                            $('#my_folder_tab_section').append(append_folders)
                            location.reload()



                        },
                        error: function (xhr, errmsg, err) {
                            console.log(xhr);
                        },
                    });
                } else {
                    $.alert("Please Choose Folder First")
                    $('#loader1').hide();
                }
            } else {
                $.alert('You have only ' + Math.round((parseInt(user_remainig_size) / 1024)) +
                    ' MB left from your limit ' + (parseInt(user_default_size) / 1024) + 'MB Please Contact to digilocker to upgrade Or upload folder with capacity less than ' +
                    Math.round((parseInt(user_remainig_size) / 1024)) + ' MB');
                $('#loader1').hide();
                $('#files').val(function () {
                    return this.defaultValue;
                });

            }

        })
        //-- end  --//

        //-- create folder ajax section --//
        $('#create_folder_btn').click(function () {
            $('#loader2').show()
            var formdata = new FormData(document.getElementById('create_folder_form'))
            var create_folder_name = formdata.get('create_folder_name')
            if (formdata != "" && create_folder_name) {
                $.ajax({
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "create_folder" %}',
                    dataType: 'json',
                    data: formdata,
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        if (data['status'] == 'ok') {
                            $('#loader2').hide()
                            $('.nav a[href="#pills-home"]').tab('show');
                            // document.getElementById('create_folder_form').reset();
                            $('#modalLRForm').modal('hide')
                            $('#modalLRInput12').val(function () {
                                return this.defaultValue;
                            });
                            var folder_name = data['folder_name']
                            var folder_id = data['folder_id']
                            var login_user_id = data['login_user_id']
                            var compile_data;
                            var count = data['all_folder_count']
                            var default_image = '{%static "images/add_bttun.png" %}'

                            // dynamic folder appending process
                            var compile_data = '<div class="d-flex bd-highlight">' +
                                '<div class=" flex-grow-1 bd-highlight">' +
                                '<button id="' + folder_id + '" class="accordion" >' + folder_name +
                                '</button>' +
                                '<div class="panel" id="main_panel_' + folder_id + '" >' +
                                '<div style="margin-top: 20px;margin-bottom: 20px;">' +
                                '<div class="d-flex bd-highlight ">' +
                                '<div class="flex-grow-1 bd-highlight">' +
                                '<div class="flex-container deai" id="' + folder_id +
                                '" onclick="modal_open(' + folder_id + ')">' +
                                '<div>' +
                                '<img src="' + default_image + '" alt="">' +
                                '</div>' +
                                '<div class="edit_add_item">' +
                                'Add Item' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class=" bd-highlight file_del_icon">' +
                                '<a href="#/" id="file_folder_trash"><i class="fas fa-trash-alt" onclick ="item_delete({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                '</div>' +
                                '<div class=" bd-highlight">' +
                                '<a href="#/" id="file_folder_trash"><i class="fa fa-window-restore" onclick ="item_restore({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                '</div>' +
                                '<div class=" bd-highlight file_share_icon">' +
                                '<a href="#/" id="file_folder_share"><i class="fa fa-share" onclick="item_share()" style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div id="panel_' + folder_id + '">' +
                                '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class=" bd-highlight f_del_icn"><i class="fas fa-trash-alt" onclick="folder_del(' +
                                folder_id + ')" style="font-size:20px;color:#708090;"></i></div>' +
                                '<div class=" bd-highlight f_share_icn"><i class="fa fa-share" onclick="folder_share(' +
                                folder_id +
                                ')" style="font-size:20px;color:#00FA9A;" aria-hidden="true"></i></div>' +
                                '</div>'

                            $('#append_dashboard_div').append(compile_data)

                        }
                        location.reload();

                        var acc = document.getElementsByClassName("accordion");
                        var j;
                        for (i = 0; i < acc.length; i++) {
                            j = i;
                            if (acc[i].classList.contains("active"))
                                break;
                        }
                        acc[j].addEventListener("click", function () {
                            this.classList.toggle("active");
                            var panel = this.nextElementSibling;
                            if (panel.style.maxHeight) {
                                panel.style.maxHeight = null;
                            } else {
                                panel.style.maxHeight = panel.scrollHeight + "px";
                            }
                        });

                        // creating new model on every sucessfull folder creation
                        var new_modal = '<div class="modal fade" id="modalForm_' + folder_id +
                            '" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">' +
                            '<div class="modal-dialog" role="document">' +
                            '<div class="modal-content">' +
                            '<div class="modal-header text-center">' +
                            '<h4 class="modal-title w-100 font-weight-bold">Add Items</h4>' +
                            '<button type="button" class="close" data-dismiss="modal" aria-label="Close">' +
                            '<span aria-hidden="true">&times;</span>' +
                            '</button>' +
                            '</div>' +
                            '<div class="modal-body mx-3">' +
                            '<form method="POST" id="form_' + folder_id +
                            '"enctype="multipart/form-data">' +
                            '<div class="md-form mb-5">' +
                            '{% csrf_token %}' +
                            '<input  type="text" name="item_folder_id" value="' + folder_id +
                            '" style="display: none;"/>' +
                            '<input type="file" name="files" id="item_files' + folder_id +
                            '" multiple>' +
                            '</div>' +

                            '</div>' +
                            '<div class="modal-footer d-flex justify-content-center">' +
                            '<button type="button" class="btn btn-primary btn-lg btn-block custom_button" onclick="addFile(' +
                            folder_id + ',' + login_user_id + ')">Add files</button>' +
                            '</div>' +
                            '<form>' +
                            '</div>' +
                            '</div>' +
                            '</div>'

                        $('#modal_add').append(new_modal)

                        //-- append folders in my folder section, when manually created folder --//
                        var append_folderss = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                            '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                            '<div class="p-4 bd-highlight wccccc2">' + folder_name + '</div>' +
                            '<div class="ml-auto p-4 bd-highlight folder_icon">' +
                            '<div class="flex-container">' +
                            '<div class="pp_d px-4">' +
                            '<a href="#/"><i class="fas fa-trash-alt" onclick="folder_del(' +
                            folder_id + ')" style="font-size:22px;color:#708090;"></i></a>' +
                            '</div>' +
                            '<div class="pp_d">' +
                            '<a href="#/" id="abc"><i class="fa fa-share" onclick="folder_share(' +
                            folder_id +
                            ')" style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                            '</div>' +
                            '</div>' +
                            '</div>' +
                            '</div>'


                        $('#my_folder_tab_section').append(append_folderss)

                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            } else {
                $.alert("Please Enter Folder Name")
                $('#loader2').hide()
            }
        });
        //-- end  --//


        // dynamic modal open function --//
        function modal_open(value) {
            new_id = '#modalForm_' + value
            $(new_id).modal('show')
        }
        //-- end  --//

        //-- add files to respective folder by ajax call and on success, all files for respective folder, append to their respective folder --//
        function addFile(folder_id_value, user_id) {
            // $('#loader3').show()
            var folder_id = folder_id_value
            item_files = 'item_files' + folder_id
            var user_remainig_fsize = parseInt($('#remaining_size_input').val())
            var user_default_size = parseInt($('#default_size_input').val())
            var total_fsize = 0;
            var total_files_size = document.getElementById(item_files);
            for (var i = 0; i <= total_files_size.files.length - 1; i++) {
                var filesize = Math.round((total_files_size.files.item(i).size) / 1024);
                total_fsize = total_fsize + filesize;
            }
            var form_data = new FormData()
            var totalfiles = document.getElementById(item_files).files.length;
            for (var index = 0; index < totalfiles; index++) {
                form_data.append("files", document.getElementById(item_files).files[index]);
            }
            form_data.append("folder_id", folder_id)
            form_data.append("add_user_id", user_id)
            form_data.append("total_fsize", total_fsize)

            if (parseInt(user_remainig_fsize) > parseInt(total_fsize)) {

                if (form_data != "") {
                    $.ajax({
                        beforeSend: function () {
                            NProgress.start();
                        },

                        type: 'POST',
                        cache: false,
                        contentType: false,
                        processData: false,
                        url: '{% url "add_file" %}',
                        dataType: 'json',
                        data: form_data,
                        headers: {
                            'X-CSRFToken': '{{csrf_token}}'
                        },
                        success: function (data) {
                            // $('#loader3').hide()
                            NProgress.done();
                            NProgress.remove();
                            folder_id = data[0]
                            $('#' + item_files).val(function () {
                                return this.defaultValue;
                            });
                            var remaining_fsize_response = parseInt(data[1])
                            $('#remaining_size_input').val(remaining_fsize_response)
                            localStorage.setItem("remaining_size", remaining_fsize_response);
                            var default_size_response = parseInt(data[2])
                            $('#default_size_input').val(default_size_response)
                            localStorage.setItem("default_size", default_size_response);
                            var form_id = 'form_' + folder_id
                            modal_id = '#modalForm_' + folder_id
                            $(modal_id).modal('hide')
                            var panel_append_id = '#panel_' + folder_id
                            $(panel_append_id).empty();
                            if (data.length > 0) {
                                for (var i = 2, total = data.length; i < total; i++) {
                                    var compile_data1;
                                    var file_id = data[i].item_id
                                    compile_data1 = '<div style="margin-top:15px;">' +
                                        '<div><!--new start-->' +
                                        '<div class="d-flex bd-highlight cc_bc_pb">' +
                                        '<div class="p-2 flex-grow-1 bd-highlight">' +
                                        '<div class="flex-container">' +
                                        '<div>' +
                                        '<a href="' + data[i].item + '" target="_blank"><img src="' + data[
                                            i].item + '"  alt="" class="ppp_ccc_image">' + data[i].icon +
                                        '</a>' +
                                        '</div>' +
                                        '<div class="items">' + data[i].file_name + '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete(' +
                                        file_id + ')" style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/"><i class="" onclick =fa fa-window-restore"item_restore(' +
                                        file_id + ')" style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class="p-2 bd-highlight">' +
                                        '<a href="#/" id="abc"><i class="fa fa-share" onclick="item_share(' +
                                        file_id +
                                        ')" style="font-size:22px;color:#00FA9A;"" aria-hidden="true"></i></a>' +
                                        '</div>' +
                                        '</div>' +
                                        '</div><!--new end-->' +
                                        '</div>'

                                    $(panel_append_id).append(compile_data1);
                                }

                            }
                            location.reload();
                        },
                        error: function (xhr, errmsg, err) {
                            console.log(xhr);
                        },
                    });
                }
            } else {
                $.alert('You have only ' + Math.round((parseInt(user_remainig_fsize) / 1024)) +
                    ' MB left from your limit ' + (parseInt(user_default_size) / 1024) + 'MB <br> Please Contact to digilocker to upgrade Or upload files with capacity less than ' +
                    Math.round((parseInt(user_remainig_fsize) / 1024)) + ' MB');
               // $('#loader3').hide();
                $('#' + item_files).val(function () {
                    return this.defaultValue;
                });
            }


        }
        //-- end  --//

        //-- dynamic addpending of deleted files in trash section by this function --//
        function deleteing_append() {
            $.ajax({
                type: 'POST',

                headers: {
                    'X-CSRFToken': '{{csrf_token}}'
                },
                dataType: 'json',
                success: function (data) {
                    $('#trash_tab_section').empty()
                    if (data.length > 0) {
                        for (var i = 0, total = data.length; i < total; i++) {
                            var count = i + 1;
                            var append_trash =
                                '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                '<div class="mr-auto p-2 bd-highlight">' +
                                '<div class="flex-container">' +
                                '<div class="trash_value deleted_row_text">' + count + '</div>' +
                                '<div class="deleted_row_text">' + data[i].folder + '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' + data[
                                    i].file_name + '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                data[i].file_url +
                                '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><i class="fa fa-trash" onclick="trash_del()" style="color:#DC143C;cursor:pointer" aria-hidden="true"></i></div>' +
                                '</div>'


                            $('#trash_tab_section').append(append_trash)
                        }
                    }
                },
                error: function (xhr, errmsg, err) {
                    console.log(xhr);
                },
            });


        }

        //-- share file to people --//
        var detete_share_files = [];
        $("input[name='file_checked']").change(function () {
            var checked = $(this).val();
            if ($(this).is(':checked')) {
                detete_share_files.push(checked);
                // console.log("checked===========")
            } else {
                detete_share_files.splice($.inArray(checked, detete_share_files), 1);
            }
        });
        var share_modal_item_id = ""

        function item_share(value) {
            $('#staticBackdrop').modal('show')
            share_modal_item_id = value
        }
        var tmp = [];
        $("input[name='checkbox_f']").change(function () {
            var checked = $(this).val();
            if ($(this).is(':checked')) {
                tmp.push(checked);
            } else {
                tmp.splice($.inArray(checked, tmp), 1);
            }
        });
        $('#shared_people_btn').on('click', function (e) {
            if(!event.detail || event.detail == 1){

            $('#loader2').show()
            var form_data = new FormData()
            var item_id = share_modal_item_id
            var share_people_ids = tmp;
            var detete_share_files_ids = detete_share_files;
            form_data.append("share_files_ids", detete_share_files_ids)
            // form_data.append("share_item_id",item_id)
            form_data.append("share_people_ids", share_people_ids)
            if (form_data != "") {
                $.ajax({
                    beforeSend: function () {
                        NProgress.start();
                    },
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "share_trash_file" %}',
                    dataType: 'json',
                    data: form_data,
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        $('#loader2').hide()
                        NProgress.done();
                        NProgress.remove();
                        $('.file_delete_share').each(function () {
                            $(this).prop('checked', false);
                        });

                        $('.share_people_cls').each(function () {
                            $(this).prop('checked', false);
                        });
                        $.alert('File Sent');
                        $('#staticBackdrop').modal('hide')
                        detete_share_files.length = 0;
                        tmp.length = 0;
                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            }
            }
        });

        $('#share_modal_close').click(function () {
            $('.share_pp').val(function () {
                return this.defaultValue
            })
        });
        //-- end --//

        // ajax for file search inside folder
        function searchFunction(event, folder_id) {
            var search_key = event.target.value
            var serach_folder_id = folder_id
            var form_data = new FormData()
            form_data.append("search_key", search_key)
            form_data.append("serach_folder_id", serach_folder_id)
            // alert(search_key)
            if (form_data != "") {
                $.ajax({
                    beforeSend: function () {
                        // NProgress.start();
                    },
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "search_files_inside_folders" %}',
                    dataType: 'json',
                    data: form_data,
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        console.log(data)
                        // alert(data)
                        if (data.status == 200) {
                            console.log(data.filename)
                            var text = "Hello World"
                            folderid = data.folderid
                            $("#panel_" + folderid).html(text)
                            // if count(data.filename)>0:
                            // for loop for file name 
                            // $('#loader2').hide()
                            NProgress.done();
                            NProgress.remove();



                        }

                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            }


        }


        //-- Delete Folder section --//

        function trash_folder_del(value) {

            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: 'delete this Folder ?',
                buttons: {
                    yes: function () {
                        var a = value;
                        $.ajax({
                            beforeSend: function () {
                                NProgress.start();
                            },
                            type: 'POST',
                            url: '{% url "delete_trash_folder" %}',
                            dataType: 'json',
                            data: {
                                folder_id: value
                            },
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            success: function (data) {
                                console.log(data)
                                NProgress.done();
                                NProgress.remove();
                                deleteing_append
                                    () //-- folder deletion function written in upper portion for dynamic appending of deleted files --//
                                var add_folder_id = '#' + data[0]
                                var main_panel = 'main_panel_' + add_folder_id
                                var modal_id = '#modalForm_' + add_folder_id
                                var default_image = '{%static "images/add_bttun.png" %}'
                                $('#append_dashboard_div').empty()
                                for (var i = 1, total = data.length; i < total; i++) {
                                    var count = i;
                                    folder_id = data[i].folder_id
                                    folder_name = data[i].folder_name
                                    var panel_append_id = '#panel_' + folder_id
                                    $(panel_append_id).empty();
                                    var compile_data = '<div class="d-flex bd-highlight">' +
                                        '<div class=" flex-grow-1 bd-highlight">' +
                                        '<button id="' + folder_id + '" class="accordion" >' +
                                        folder_name + '</button>' +
                                        '<div class="panel" id="main_panel_' + folder_id +
                                        '" >' +
                                        '<div style="margin-top: 20px;margin-bottom: 20px;">' +
                                        '<div class="d-flex bd-highlight ">' +
                                        '<div class="flex-grow-1 bd-highlight">' +
                                        '<div class="flex-container deai" id="' + folder_id +
                                        '" onclick="modal_open(' + folder_id + ')">' +
                                        '<div>' +
                                        '<img src="' + default_image + '" alt="">' +
                                        '</div>' +
                                        '<div class="edit_add_item">' +
                                        'Add Item' +
                                        '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        '<div class=" bd-highlight file_del_icon">' +
                                        '<a href="#/" id="file_folder_trash"><i class="fas fa-trash-alt" onclick ="item_delete({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class=" bd-highlight">' +
                                        '<a href="#/" id="file_folder_trash"><i class="fa fa-window-restore" onclick ="item_restore({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                        '</div>' +
                                        '<div class=" bd-highlight file_share_icon">' +
                                        '<a href="#/" id="file_folder_share"><i class="fa fa-share"  style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                        '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        '<div id="panel_' + folder_id + '">' +
                                        '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        '<div class=" bd-highlight f_del_icn"><i class="fas fa-trash-alt" onclick="folder_del(' +
                                        folder_id +
                                        ')" style="font-size:20px;color:#708090;"></i></div>' +
                                        '<div class=" bd-highlight f_share_icn"><i class="fa fa-share"  style="font-size:20px;color:#00FA9A;" aria-hidden="true"></i></div>' +
                                        '</div>'



                                    $('#append_dashboard_div').append(compile_data)
                                    var acc = document.getElementsByClassName("accordion");
                                    var j;
                                    for (i = 0; i < acc.length; i++) {
                                        j = i;
                                        if (acc[i].classList.contains("active"))
                                            break;
                                    }
                                    acc[j].addEventListener("click", function () {
                                        this.classList.toggle("active");
                                        var panel = this.nextElementSibling;
                                        if (panel.style.maxHeight) {
                                            panel.style.maxHeight = null;
                                        } else {
                                            panel.style.maxHeight = panel.scrollHeight +
                                                "px";
                                        }
                                    });

                                    let childArray = data[i].products
                                    for (let j = 0; j < childArray.length; j++) {
                                        var file_compile_data1;
                                        var file_id = childArray[j].file_id
                                        file_compile_data1 = '<div style="margin-top:15px;">' +
                                            '<div><!--new start-->' +
                                            '<div class="d-flex bd-highlight cc_bc_pb">' +
                                            '<div class="p-2 flex-grow-1 bd-highlight">' +
                                            '<div class="flex-container">' +
                                            '<div>' +
                                            '<a href="' + childArray[j].image +
                                            '" target="_blank"><img src="' + childArray[j]
                                                .image + '"  alt="" class="ppp_ccc_image">' +
                                            childArray[j].icon + '</a>' +
                                            '</div>' +
                                            '<div class="items">' + childArray[j].file_name +
                                            '</div>' +
                                            '</div>' +
                                            '</div>' +
                                            // '<div class="p-2 bd-highlight">'+
                                            // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                            // '</div>'+
                                            '<div class="p-2 bd-highlight">' +
                                            '<div class="form-group form-check">' +
                                            '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                            file_id + '" id="file_checked_' + file_id + '">' +
                                            '</div>' +
                                            '</div>' +
                                            '</div><!--new end-->' +
                                            '</div>'

                                        $(panel_append_id).append(file_compile_data1);
                                    }


                                }
                                // on successfull deletion main dashboard folders deleted , that has same folder id as response//
                                $(add_folder_id).remove()
                                $(main_panel).empty()
                                $(modal_id).remove()
                                $(main_panel).remove()
                                // $('.nav a[href="#pills-home"]').tab('show');
                                location.reload()

                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                        $.alert('Deleted!');
                    },
                    No: function () {
                        $.alert('Canceled!');
                        // $('.nav a[href="#pills-home"]').tab('show');

                    },
                }
            });

        }
        //-- end  --//

        //needed for single file delete 
        function deletefile33(id) {
            console.log(id);
            url = "{% url 'delete_single_item' %}"
            location.replace(url);
        }



        function deletefile(value) {

            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: 'delete this file ?',
                buttons: {
                    yes: function () {
                        
                        $.ajax({
                            // beforeSend: function () {
                            //     NProgress.start();
                            // },
                            type: 'POST',
                            url: '{% url "delete_single_item" %}',
                            dataType: 'json',
                            data: {
                                file_id: value
                            },
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                        //$.alert('Deleted!');
                        window.location.replace("{% url 'index' %}");
                    },
                    No: function () {
                        $.alert('Canceled!');
                        // $('.nav a[href="#pills-home"]').tab('show');

                    },
                }
            });

        }

        //-- Search Folder Section --//

        $('#search_folder').keyup(function () {
            //$('#loader').show()
            value = $('#search_folder').val();
            if (value != "") {
                $.ajax({
                    type: 'POST',
                    url: '{% url "search_folder" %}',
                    dataType: 'json',
                    data: {
                        folder_text: value
                    },
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        $('#loader').hide()
                        //$('.nav a[href="#pills-contact"]').tab('show');
                        //$('#my_folder_tab_section').empty()
                        console.log(data)
                        $('#pills-Sovrana').hide();
                        $('#pills-profile').show();
                        $('#my_people_tab_section').empty()
                           
                        if (data.length > 0) {
                            for (var i = 0, total = data.length; i < total; i++) {
                                var count = i + 1;
                                if (data[i].type=='folder'){
                                var folder_id = data[i].folder_id
                                
                                var append_folders = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                                    '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                                    '<div class="p-4 bd-highlight wccccc2">' + data[i].folder_name +
                                    '</div>' +
                                    '<div class="ml-auto p-4 bd-highlight folder_icon">' +
                                    '<div class="flex-container">' +
                                    '<div class="pp_d px-4">' +
                                    '<a href="#/"><i class="fas fa-trash-alt" onclick="folder_del(' +
                                    folder_id +
                                    ')" style="font-size:22px;color:#708090;"></i></a>' +
                                    '</div>' +
                                    '<div class="pp_d">' +
                                    '<a href="#/" id="abc"><i class="fa fa-share" onclick="folder_share(' +
                                    folder_id +
                                    ')" style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>'
                               

                                //$('#my_folder_tab_section').append(append_folders)
                                $('#my_people_tab_section').append(append_folders)
                            }
                            else{
                                var file_id = data[i].file_id
                                console.log(data[i].file_name,"   ",file_id)
                                //file_id=file_id.toString();
                                
                                
                                var append_files='<div class="d-flex bd-highlight mb-1 mbbt">' +
                                    '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                                    '<div class="p-4 bd-highlight wccccc2">' + data[i].file_name +
                                    '</div>' +
                                    '<div class="ml-auto p-4 bd-highlight folder_icon">' +
                                    '<div class="flex-container">' +
                                    '<div class="pp_d px-4">' +
                                    '<a href="#/"><i class="fas fa-trash-alt" onclick="deletefile('+file_id+')" style="font-size:22px;color:#708090;"></i></a>' +
                                    '</div>' +
                                    '<div class="pp_d">' +
                                    '<a href="#/" id="abc"><i class="fa fa-share" onclick="folder_share(' +
                                    file_id +
                                    ')" style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>'
                                $('#my_people_tab_section').append(append_files)
                            }
                            }
                            //file section 
                            
                        }
                        else{
                            $.alert("No Folder Found")
                        }
                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            } else {
                //$('#loader').hide()
                $('#pills-profile').hide();
                $('#pills-Sovrana').show();
                // $('.nav a[href="#pills-home"]').tab('show');
            }

        });
        //-- end  --//



        //-- Search People Section --//

        $('#search_people').keyup(function () {
            $('#loader').show()
            value = $('#search_people').val();
            if (value != "") {
                $.ajax({
                    type: 'POST',
                    url: '{% url "search_people" %}',
                    dataType: 'json',
                    data: {
                        people_text: value
                    },
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        $('#loader').hide();
                        $('#pills-Quadra').hide();
                        // $('.nav a[href="#pills-profile"]').tab('show');
                        $('#pills-Sovrana').hide();
                        $('#pills-profile').show();
                        $('#my_people_tab_section').empty()
                        if (data.length > 0) {
                            for (var i = 0, total = data.length; i < total; i++) {
                                var count = i + 1;
                                var append_people = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                                    '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                                    '<div class="p-4 bd-highlight wccccc2">' + data[i].user_id +
                                    '</div>' +
                                    '<div class="ml-auto p-2 bd-highlight">' +
                                    '<img src=' + data[i].image + ' alt="" class="bbbb">' +
                                    '</div>' +
                                    '</div>'


                                $('#my_people_tab_section').append(append_people)
                            }
                        }
                        
                        else{
                            $.alert("No Member Found")
                        }
                        
                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            } else {
                $('#pills-profile').hide();
                $('#loader').hide()
                $('#pills-Sovrana').show();
            }

        });
        //-- end  --//

        //-- logout section --//

        $('#logout_btn').click(function () {
            $('#loader').show()
            user_id = $('#logout_btn').val()
            $.ajax({
                beforeSend: function () {
                    NProgress.start();
                },
                type: 'POST',
                url: '{% url "Logout" %}',
                dataType: 'json',
                data: {
                    user_id: user_id
                },
                headers: {
                    'X-CSRFToken': '{{csrf_token}}'
                },
                success: function (data) {
                    $('#loader').hide()
                    NProgress.done();
                    NProgress.remove();
                    if (data['status'] == 'success') {
                        window.localStorage.clear();
                        var url = '{% url "login_render" %}'
                        window.location.href = url;
                    }
                },
                error: function (xhr, errmsg, err) {
                    console.log(xhr);
                    $('#loader').hide()
                },
            });

        });
        //-- end  --//




        //-- member section pagination ,add active class to current clickable <a> tag --//
        $(document).find(".page-item").on("click", function () {
            var currentAcc = $(this);
            $(document).find(".page-item").removeClass("active");
            currentAcc.addClass("active");
        });
        //-- end  --//




        //-- Share_file_delete --//
        function share_del(value) {
            console.log(value)
            if (value) {
                $.ajax({
                    beforeSend: function () {
                        NProgress.start();
                    },
                    type: 'POST',
                    url: '{% url "shared_file_del" %}',
                    data: {
                        'shared_item_id': value,
                    },
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    dataType: 'json',
                    success: function (data) {
                        NProgress.done();
                        NProgress.remove();
                        $('#share_tab_section').empty()
                        if (data.length > 0) {
                            // var start_cc = data[0]
                            for (var i = 0, total = data.length; i < total; i++) {
                                var share_count = i + 1
                                var append_share =
                                    '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                    '<div class="mr-auto p-2 bd-highlight">' +
                                    '<div class="flex-container">' +
                                    '<div class="trash_value deleted_row_text">' + share_count + '</div>' +
                                    '<div class="deleted_row_text">' + data[i].sender_name + '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                    data[i].file_name + '</div>' +
                                    '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                    data[i].file_url +
                                    '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                    '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><i class="fa fa-trash" onclick="share_del(' +
                                    data[i].file_id +
                                    ')" style="color:#DC143C;cursor:pointer" aria-hidden="true"></i></div>' +
                                    '</div>'


                                $('#share_tab_section').append(append_share)
                            }
                        }
                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });

            }
        }

        //-- end --//


        // -- folder share portion -- //
        var share_modal_folder_id = ""

        function folder_share(value) {
            $('#staticBackdrop1').modal('show')
            share_modal_folder_id = value
        }

        function Non_register_folder_share(value) {
            $('#non_registered_people').modal('show')
            share_modal_folder_id = value
        }

        var tmp_val = [];
        $("input[name='checkbox']").change(function () {
            var checked = $(this).val();
            //console.log(checked);
            if ($(this).is(':checked')) {
                tmp_val.push(checked);
            } else {
                tmp_val.splice($.inArray(checked, tmp), 1);
            }
        });
        


    $('#shared_folder_people_btn').on('click', function () {
        if(!event.detail || event.detail == 1){

        var form_data = new FormData()
        var folder_id = share_modal_folder_id
        var share_people_ids = tmp_val;
        form_data.append("share_folder_id", folder_id)
        form_data.append("share_people_ids", share_people_ids)
        if (form_data != "") {
            $.ajax({
                beforeSend: function () {
                    NProgress.start();
                },
                type: 'POST',
                cache: false,
                contentType: false,
                processData: false,
                url: '{% url "trash_share_folder" %}',
                dataType: 'json',
                data: form_data,
                headers: {
                    'X-CSRFToken': '{{csrf_token}}'
                },
                success: function (data) {
                    
                    NProgress.done();
                    NProgress.remove();
                    $("input:checkbox").prop("checked",$("input:checkbox").prop("checked"))
                    $('#staticBackdrop1').modal('hide')
                    tmp_val.length = 0;
                    $.alert(data['message'])
                },
                error: function (xhr, errmsg, err) {
                    console.log(xhr);
                },
            });
        }
        
    }
});


        $('#share_modal_close').click(function () {
            $('.share_pp').val(function () {
                return this.defaultValue
            })
        });
        //-- end --//
    </script>

    <script>
        //-- member pegi new right-- //

        $('#member_left_btn').prop('disabled', true);
        var member_offset = 0;
        //   var member_page_value=1
        var member_count;
        $('#member_right_btn').click(function () {
            $('#member_left_btn').prop('disabled', false);
            $.ajax({
                url: '{% url "member_ajax_right" %}',
                data: {
                    'offset': member_offset + 6,
                },
                success: function (data) {
                    //   console.log(data)
                    member_count = data[0]
                    actual_count = data[1]
                    //   $('#counter').html(toString(member_page_value))
                    $('#my_people_tab_section').empty()
                    if (data.length > 0) {
                        for (var i = 2, total = data.length; i < total; i++) {
                            var count = actual_count + i - 1;
                            var append_people = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                                '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                                '<div class="p-4 bd-highlight wccccc2">' + data[i].user_id +
                                '</div>' +
                                '<div class="ml-auto p-2 bd-highlight">' +
                                '<img src=' + data[i].image + ' alt="" class="bbbb">' +
                                '</div>' +
                                '</div>'


                            $('#my_people_tab_section').append(append_people)
                        }
                    }
                    member_offset = member_offset + 6;
                    if (member_offset >= member_offset) {
                        member_offset = member_offset;
                    }
                    console.log("right btn success" + member_offset)
                    if (member_offset >= member_count) {
                        $('#member_right_btn').prop('disabled', true);
                        $.alert("This is Last page<br>Press left button to go to previous page")
                    }
                }

            });
            //    member_page_value = member_page_value+1;

        });

        // --member pegi new right-- //

        $('#member_left_btn').click(function () {
            $('#member_right_btn').prop('disabled', false);
            if (member_offset == 6) {
                $('#member_left_btn').prop('disabled', true);
            }

            $.ajax({
                url: '{% url "member_ajax_left" %}',
                data: {
                    'offset': member_offset - 6,
                },
                success: function (data) {
                    if (data.length > 0) {
                        member_back_count = data[0]
                        // $('#counter').html(toString(member_page_value))
                        $('#my_people_tab_section').empty();
                        for (var i = 1, total = data.length; i < total; i++) {
                            var count = member_back_count + i;
                            var append_people = '<div class="d-flex bd-highlight mb-1 mbbt">' +
                                '<div class="p-4 bd-highlight wccccc1">' + count + '</div>' +
                                '<div class="p-4 bd-highlight wccccc2">' + data[i].user_id +
                                '</div>' +
                                '<div class="ml-auto p-2 bd-highlight">' +
                                '<img src=' + data[i].image + ' alt="" class="bbbb">' +
                                '</div>' +
                                '</div>'


                            $('#my_people_tab_section').append(append_people)
                        }
                    }
                    member_offset = member_offset - 6;
                    if (member_offset == -6) {
                        member_offset = member_offset
                    }
                    console.log("left btn success" + member_offset)
                    if (member_offset == 1) {
                        $('#member_left_btn').prop('disabled', true);
                    }
                }

            });
            // member_page_value = member_page_value-1;
        });


        // -- member pegi left --//
    </script>

    <script>
        //-- trash pegi new right-- //

        $('#trash_left_btn').prop('disabled', true);
        var trash_offset = 0;
        //   var member_page_value=1
        var trash_count;
        $('#trash_right_btn').click(function () {
            $('#trash_left_btn').prop('disabled', false);
            $.ajax({
                url: '{% url "trash_ajax_right" %}',
                data: {
                    'offset': trash_offset + 7,
                },
                success: function (data) {
                    //   console.log(data)
                    trash_count = data[0]
                    actual_count = data[1]
                    //   $('#counter').html(toString(member_page_value))
                    $('#trash_tab_section').empty()
                    if (data.length > 0) {
                        for (var i = 2, total = data.length; i < total; i++) {
                            var count = actual_count + i - 1;
                            var append_trash =
                                '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                '<div class="mr-auto p-2 bd-highlight">' +
                                '<div class="flex-container">' +
                                '<div class="trash_value deleted_row_text">' + count + '</div>' +
                                '<div class="deleted_row_text">' + data[i].folder_name + '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                data[i].file_name + '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                data[i].file +
                                '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive">' +
                                '<div class="form-group form-check">' +
                                '<input type="checkbox" class="form-check-input trash_check checkbox_checked" name ="trash_file_checked" value="' +
                                data[i].file_id + '" >'
                            '</div>' +
                                '</div>'


                            $('#trash_tab_section').append(append_trash)
                        }
                    }
                    trash_offset = trash_offset + 7;
                    if (trash_offset >= trash_offset) {
                        trash_offset = trash_offset;
                    }
                    console.log("right btn success" + trash_offset)
                    if (trash_offset >= trash_count) {
                        $('#trash_right_btn').prop('disabled', true);
                        $.alert("This is Last page<br>Press left button to go to previous page")
                    }
                }

            });
            //    member_page_value = member_page_value+1;

        });

        // --member pegi new right-- //

        $('#trash_left_btn').click(function () {
            $('#trash_right_btn').prop('disabled', false);
            if (trash_offset == 7) {
                $('#trash_left_btn').prop('disabled', true);
            }

            $.ajax({
                url: '{% url "trash_ajax_left" %}',
                data: {
                    'offset': trash_offset - 7,
                },
                success: function (data) {
                    if (data.length > 0) {
                        back_count = data[0]
                        // $('#counter').html(toString(member_page_value))
                        $('#trash_tab_section').empty();
                        for (var i = 1, total = data.length; i < total; i++) {
                            var count = back_count + i;
                            var append_trash =
                                '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                '<div class="mr-auto p-2 bd-highlight">' +
                                '<div class="flex-container">' +
                                '<div class="trash_value deleted_row_text">' + count + '</div>' +
                                '<div class="deleted_row_text">' + data[i].folder_name + '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                data[i].file_name + '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                data[i].file +
                                '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive">' +
                                '<div class="form-group form-check">' +
                                '<input type="checkbox" class="form-check-input trash_check checkbox_checked" name ="trash_file_checked" value="' +
                                data[i].file_id + '">'
                            '</div>' +
                                '</div>'


                            $('#trash_tab_section').append(append_trash)
                        }
                    }
                    trash_offset = trash_offset - 7;
                    if (trash_offset == -7) {
                        trash_offset = trash_offset
                    }
                    console.log("left btn success" + trash_offset)
                    if (trash_offset == 1) {
                        $('#trash_left_btn').prop('disabled', true);
                    }
                }

            });
            // member_page_value = member_page_value-1;
        });


        // -- trash pegi left --//
    </script>

    <script>
        //-- share pegi new right-- //

        $('#share_left_btn').prop('disabled', true);
        var share_offset = 0;
        //   var member_page_value=1
        var share_count;
        var back_count;
        $('#share_right_btn').click(function () {
            $('#share_left_btn').prop('disabled', false);
            $.ajax({
                url: '{% url "share_ajax_right" %}',
                data: {
                    'offset': share_offset + 7,
                },
                success: function (data) {
                    //   console.log(data)
                    share_count = data[0]
                    s_count = data[1]
                    //   actual_count=data[1]
                    //   $('#counter').html(toString(member_page_value))
                    $('#share_tab_section').empty()
                    if (data.length > 0) {
                        for (var i = 2, total = data.length; i < total; i++) {
                            var count_share = s_count + i - 1;
                            var append_trash =
                                '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                '<div class="mr-auto p-2 bd-highlight">' +
                                '<div class="flex-container">' +
                                '<div class="trash_value deleted_row_text">' + count_share +
                                '</div>' +
                                '<div class="deleted_row_text">' + data[i].sender_name + '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                data[i].file_name + '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                data[i].file_url +
                                '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><i class="fa fa-trash" onclick="share_del(' +
                                data[i].file_id +
                                ')" style="color:#DC143C;cursor:pointer" aria-hidden="true"></i></div>' +
                                '</div>'


                            $('#share_tab_section').append(append_trash)

                        }
                    }
                    share_offset = share_offset + 7;
                    if (share_offset >= share_offset) {
                        share_offset = share_offset;
                    }
                    console.log("right btn success" + share_offset)
                    if (share_offset >= share_count) {
                        $('#share_right_btn').prop('disabled', true);
                        $.alert("This is Last page<br>Press left button to go to previous page")
                    }
                }

            });
            //    member_page_value = member_page_value+1;

        });

        // --member pegi new right-- //

        $('#share_left_btn').click(function () {
            $('#share_right_btn').prop('disabled', false);
            if (share_offset == 7) {
                $('#share_left_btn').prop('disabled', true);
            }

            $.ajax({
                url: '{% url "share_ajax_left" %}',
                data: {
                    'offset': share_offset - 7,
                },
                success: function (data) {
                    if (data.length > 0) {
                        back_count = data[0]
                        // $('#counter').html(toString(member_page_value))
                        $('#share_tab_section').empty();
                        for (var i = 1, total = data.length; i < total; i++) {
                            var count_share = back_count + i;
                            var append_trash =
                                '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                '<div class="mr-auto p-2 bd-highlight">' +
                                '<div class="flex-container">' +
                                '<div class="trash_value deleted_row_text">' + count_share +
                                '</div>' +
                                '<div class="deleted_row_text">' + data[i].sender_name + '</div>' +
                                '</div>' +
                                '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                data[i].file_name + '</div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                data[i].file_url +
                                '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><i class="fa fa-trash" onclick="share_del(' +
                                data[i].file_id +
                                ')" style="color:#DC143C;cursor:pointer" aria-hidden="true"></i></div>' +
                                '</div>'


                            $('#share_tab_section').append(append_trash)
                        }
                    }
                    share_offset = share_offset - 7;
                    if (share_offset == -7) {
                        share_offset = share_offset
                    }
                    console.log("left btn success" + share_offset)
                    if (share_offset == 1) {
                        $('#share_left_btn').prop('disabled', true);
                        $.alert("This is stating page<br>Go right for other files")
                    }
                }

            });
            // member_page_value = member_page_value-1;
        });


        // -- share pegi left --//
    </script>

    <script>

        function item_delete() {
            var file_form_data = new FormData()
            var detete_share_files_ids = detete_share_files;
            file_form_data.append("detete_files_ids", detete_share_files_ids)
            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: 'Delete Files ?',
                buttons: {
                    Yes: function () {
                        $('#loader').show()
                        // var a = data;
                        $.ajax({
                            beforeSend: function () {
                                NProgress.start();
                            },
                            type: 'POST',
                            cache: false,
                            contentType: false,
                            processData: false,
                            url: '{% url "delete_trash_file" %}',
                            dataType: 'json',
                            data: file_form_data,
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            success: function (data) {
                                NProgress.done();
                                NProgress.remove();
                                deleteing_append()
                                $('#loader')
                                    .hide() //-- folder deletion function written in upper portion for dynamic appending of deleted files --//
                                folder_id = data[0]
                                var form_id = 'form_' + folder_id
                                modal_id = '#modalForm_' + folder_id
                                $(modal_id).modal('hide')
                                var panel_append_id = '#panel_' + folder_id
                                $(panel_append_id).empty();
                                if (data.length > 0) {
                                    for (var i = 1, total = data.length; i < total; i++) {
                                        var compile_data;
                                        var compile_data1;
                                        var file_id = data[i].item_id
                                        var item = data[i].item
                                        if (data[i].item) 
                                        {
                                            if (item.includes(".png")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else if (item.includes(".jpg")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else if (item.includes(".jpeg")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else if (item.includes(".PNG")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else if (item.includes(".JPG")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else if (item.includes(".JPEG")) {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank"><img src="' + data[i]
                                                        .item + '"  alt="" class="ppp_ccc_image">' +
                                                    data[i].icon + '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            } else {
                                                compile_data1 =
                                                    '<div style="margin-top:15px;">' +
                                                    '<div><!--new start-->' +
                                                    '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                    '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                    '<div class="flex-container">' +
                                                    '<div>' +
                                                    '<a href="' + data[i].item +
                                                    '" target="_blank">' + data[i].icon +
                                                    '</a>' +
                                                    '</div>' +
                                                    '<div class="items">' + data[i].file_name +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    // '</div>'+
                                                    // '<div class="p-2 bd-highlight">'+
                                                    // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                    // '</div>'+
                                                    '<div class="p-2 bd-highlight">' +
                                                    '<div class="form-group form-check">' +
                                                    '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                    file_id + '" id="file_checked_' + file_id +
                                                    '">' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div>' +
                                                    '</div><!--new end-->' +
                                                    '</div>'
                                            }

                                        } else {

                                            compile_data1 = '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="#/">' + data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        }



                                        $(panel_append_id).append(compile_data1);
                                    }

                                }

                                // detete_files.length=0
                                //  $('input:checkbox').removeAttr('checked');
                                location.reload();
                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                                $('#loader').hide()
                            },
                        });
                        $.alert('Delete Successfully!');
                    },
                    No: function () {
                        $.alert('Canceled!');
                    },
                }
            });
        }

        function shared_item_delete()
        {
            
        }
        // -------------------------------
        // delete folder file in one go

        // -------------------------------------------------- //

        // delete trash file in one go 
        var detete_trash = [];
        $("input[name='trash_file_checked']").change(function () {
            var checked = $(this).val();
            if ($(this).is(':checked')) {
                detete_trash.push(checked);
            } else {
                detete_trash.splice($.inArray(checked, detete_trash), 1);
            }
        });

        // select all functionality //
        $('#select_all_btn').click(function () {

            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: 'delete Files ?',
                buttons: {
                    confirm: function () {
                        $.ajax({
                            beforeSend: function () {
                                NProgress.start();
                            },
                            type: 'POST',
                            url: '{% url "trash_all__delete" %}',
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            dataType: 'json',
                            success: function (data) {
                                NProgress.done();
                                NProgress.remove();
                                $('#trash_tab_section').empty()
                                $('#ckbCheckAll').prop('checked', false);
                                detete_trash.length = 0;
                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                    },
                    cancel: function () {
                        alert('Canceled!')
                    }
                }
            });

        })


        function trash_del() {
            var trash_form_data = new FormData()
            var trash_files_ids = detete_trash;
            trash_form_data.append("trash_files_ids", trash_files_ids)
            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: 'delete Files ?',
                buttons: {
                    confirm: function () {
                        $.ajax({
                            beforeSend: function () {
                                NProgress.start();
                            },
                            type: 'POST',
                            url: '{% url "trash_delete" %}',
                            cache: false,
                            contentType: false,
                            processData: false,
                            data: trash_form_data,
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            dataType: 'json',
                            success: function (data) {
                                NProgress.done();
                                NProgress.remove();
                                $('#trash_tab_section').empty()
                                if (data.length > 0) {
                                    // var start = data[0]
                                    for (var i = 0, total = data.length; i < total; i++) {
                                        var count = i + 1
                                        var append_trash =
                                            '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                            '<div class="mr-auto p-2 bd-highlight">' +
                                            '<div class="flex-container">' +
                                            '<div class="trash_value deleted_row_text">' +
                                            count + '</div>' +
                                            '<div class="deleted_row_text">' + data[i]
                                                .folder_name + '</div>' +
                                            '</div>' +
                                            '</div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                            data[i].file_name + '</div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                            data[i].file +
                                            '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text for_icon_retive">' +
                                            '<div class="form-group form-check">' +
                                            '<input type="checkbox" class="form-check-input trash_check checkbox_checked" name ="trash_file_checked" value="' +
                                            data[i].file_id + '">'
                                        '</div>' +
                                            '</div>'


                                        $('#trash_tab_section').append(append_trash)
                                    }
                                }
                                // trash_form_data.delete('trash_files_ids')
                                // location.reload();
                                $('#ckbCheckAll').prop('checked', false);
                                detete_trash.length = 0;
                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                    },
                    cancel: function () {
                        alert('Canceled!')
                    }
                }
            });
        }

    function item_restore() {
        var file_form_data = new FormData()
        var detete_share_files_ids = detete_share_files;
        file_form_data.append("detete_files_ids", detete_share_files_ids);

        if (detete_share_files_ids.length === 0) {
            $.alert('No files selected!');
            return;
        }
        $.confirm({
            type: 'blue',
            typeAnimated: true,
            boxWidth: '70%',
            icon: 'fa fa-warning',
            title: 'Restore Files ?',
            buttons: {
                Yes: function () {
                    $('#loader').show()
                    // var a = data;
                    $.ajax({
                        beforeSend: function () {
                            NProgress.start();
                        },
                        type: 'POST',
                        cache: false,
                        contentType: false,
                        processData: false,
                        url: '{% url "restore_trash_file" %}',
                        dataType: 'json',
                        data: file_form_data,
                        headers: {
                            'X-CSRFToken': '{{csrf_token}}'
                        },
                        success: function (data) {
                            NProgress.done();
                            NProgress.remove();
                            deleteing_append()
                            $('#loader')
                                .hide() //-- folder deletion function written in upper portion for dynamic appending of deleted files --//
                            folder_id = data[0]
                            var form_id = 'form_' + folder_id
                            modal_id = '#modalForm_' + folder_id
                            $(modal_id).modal('hide')
                            var panel_append_id = '#panel_' + folder_id
                            $(panel_append_id).empty();
                            if (data.length > 0) {
                                for (var i = 1, total = data.length; i < total; i++) {
                                    var compile_data;
                                    var compile_data1;
                                    var file_id = data[i].item_id
                                    var item = data[i].item
                                    if (data[i].item)
                                    {
                                        if (item.includes(".png")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else if (item.includes(".jpg")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else if (item.includes(".jpeg")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else if (item.includes(".PNG")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else if (item.includes(".JPG")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else if (item.includes(".JPEG")) {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank"><img src="' + data[i]
                                                    .item + '"  alt="" class="ppp_ccc_image">' +
                                                data[i].icon + '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        } else {
                                            compile_data1 =
                                                '<div style="margin-top:15px;">' +
                                                '<div><!--new start-->' +
                                                '<div class="d-flex bd-highlight cc_bc_pb">' +
                                                '<div class="p-2 flex-grow-1 bd-highlight">' +
                                                '<div class="flex-container">' +
                                                '<div>' +
                                                '<a href="' + data[i].item +
                                                '" target="_blank">' + data[i].icon +
                                                '</a>' +
                                                '</div>' +
                                                '<div class="items">' + data[i].file_name +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                // '</div>'+
                                                // '<div class="p-2 bd-highlight">'+
                                                // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                                // '</div>'+
                                                '<div class="p-2 bd-highlight">' +
                                                '<div class="form-group form-check">' +
                                                '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                                file_id + '" id="file_checked_' + file_id +
                                                '">' +
                                                '</div>' +
                                                '</div>' +
                                                '</div>' +
                                                '</div><!--new end-->' +
                                                '</div>'
                                        }

                                    } else {

                                        compile_data1 = '<div style="margin-top:15px;">' +
                                            '<div><!--new start-->' +
                                            '<div class="d-flex bd-highlight cc_bc_pb">' +
                                            '<div class="p-2 flex-grow-1 bd-highlight">' +
                                            '<div class="flex-container">' +
                                            '<div>' +
                                            '<a href="#/">' + data[i].icon + '</a>' +
                                            '</div>' +
                                            '<div class="items">' + data[i].file_name +
                                            '</div>' +
                                            '</div>' +
                                            '</div>' +
                                            // '</div>'+
                                            // '<div class="p-2 bd-highlight">'+
                                            // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                            // '</div>'+
                                            '<div class="p-2 bd-highlight">' +
                                            '<div class="form-group form-check">' +
                                            '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                            file_id + '" id="file_checked_' + file_id +
                                            '">' +
                                            '</div>' +
                                            '</div>' +
                                            '</div>' +
                                            '</div><!--new end-->' +
                                            '</div>'
                                    }



                                    $(panel_append_id).append(compile_data1);
                                }

                            }

                            // detete_files.length=0
                            //  $('input:checkbox').removeAttr('checked');
                            location.reload();
                        },
                        error: function (xhr, errmsg, err) {
                            console.log(xhr);
                            $('#loader').hide()
                        },
                    });
                    $.alert('Restore Successfully!');
                },
                No: function () {
                    $.alert('Canceled!');
                },
            }
        });
    }


    </script>


    <script>
        $('#shared_folder_non_register_people_btn').on('click', function () {
            // $('#loader2').show() 
            var form_data = new FormData()
            var folder_id = share_modal_folder_id
            var email = $("#shared_mail_id").val();
            // alert(folder_id) 
            form_data.append("share_folder_id", folder_id)
            form_data.append("email", email) //
            if (form_data != "") {
                $.ajax({
                    beforeSend: function () { NProgress.start(); },
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "Non_register_trash_user_post" %}',
                    dataType: 'json',
                    data: form_data,
                    headers: { 'X-CSRFToken': '{{csrf_token}}' },
                    success: function (data) {
                        console.log(data)
                        if (data.status == 200) {
                            /*$('#loader2').hide() */
                            NProgress.done();
                            NProgress.remove();
                            $('input:checkbox').removeAttr('checked');
                            /*$('#non_registered_people').modal('hide') */
                            tmp_val.length = 0;
                            $('#shared_folder_success_msg').text(data.msg)
                            $('#shared_folder_success_div').show()
                        }
                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            }
        });

    </script>

    <!-- jquery and js for non registered people file share inside folder -->
    <script>
        var file_ids = [];
        var share_files_ids = ""

        $("input[name='file_checked']").change(function () {
            // alert("hello")
            var checked = $(this).val();
            if ($(this).is(':checked')) {
                file_ids.push(checked);
                // alert(file_ids)
                // alert("list of file ids")
            } else {
                file_ids.splice($.inArray(checked, file_ids), 1);
                // alert(file_ids)
                // alert("list of file ids")
            }
        });

        var shared_file_ids = [];
        var shared_share_files_ids = ""

        $("input[name='shared_file_checked']").change(function () {
            // alert("hello")
            var checked = $(this).val();
            if ($(this).is(':checked')) {
                shared_file_ids.push(checked);
                // alert(file_ids)
                // alert("list of file ids")
            } else {
                shared_file_ids.splice($.inArray(checked, file_ids), 1);
                // alert(file_ids)
                // alert("list of file ids")
            }
        });


        $('#shared_file_non_register_file_btn').on('click', function () {

            // console.log(file_ids)
            var form_data = new FormData()
            var folder_id = share_modal_item_id
            // alert(folder_id)
            var str_file_id = file_ids.toString()
            // alert(str_file_id)
            var output_str_file_id = str_file_id.split(',').join(',');
            // alert(output_str_file_id)
            var email = $("#shared_file_email_id").val();
            form_data.append("share_folder_id", folder_id)
            form_data.append("file_id", output_str_file_id)
            form_data.append("email", email)

            if (form_data != "") {
                $.ajax({
                    beforeSend: function () {
                        NProgress.start();
                    },
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    url: '{% url "trash_share_folder" %}',
                    dataType: 'json',
                    data: form_data,
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}'
                    },
                    success: function (data) {
                        console.log(data)
                        if (data.status == 200) {
                            // $('#loader2').hide()
                            NProgress.done();
                            NProgress.remove();
                            $('input:checkbox').removeAttr('checked');
                            tmp_val.length = 0;
                            $('#shared_file_success_msg').text(data.msg)
                            $('#shared_file_success_div').show()
                        }

                    },
                    error: function (xhr, errmsg, err) {
                        console.log(xhr);
                    },
                });
            }

        });
    </script>


    <!-- add jquery and js for trash retrieve -->
    <script>
        var item_id = ""

        function trash_retrieve(value) {
            var item_id = value
            var trash_form_data = new FormData()
            var trash_files_ids = detete_trash;
            trash_form_data.append("trash_files_ids", trash_files_ids)
            $.confirm({
                type: 'blue',
                typeAnimated: true,
                boxWidth: '70%',
                icon: 'fa fa-warning',
                title: '/retrieve File ?',
                buttons: {
                    confirm: function () {
                        $.ajax({
                            beforeSend: function () {
                                NProgress.start();
                            },
                            type: 'POST',
                            url: '/trash_retrieve/',
                            cache: false,
                            contentType: false,
                            processData: false,
                            data: trash_form_data,
                            headers: {
                                'X-CSRFToken': '{{csrf_token}}'
                            },
                            dataType: 'json',
                            success: function (data) {
                                NProgress.done();
                                NProgress.remove();
                                $('#trash_tab_section').empty()
                                if (data.length > 0) {
                                    // var start = data[0]
                                    for (var i = 0, total = data.length; i < total; i++) {
                                        var count = i + 1
                                        var append_trash =
                                            '<div class="d-flex bd-highlight  py-3 trash_border_bottom">' +
                                            '<div class="mr-auto p-2 bd-highlight">' +
                                            '<div class="flex-container">' +
                                            '<div class="trash_value deleted_row_text">' +
                                            count + '</div>' +
                                            '<div class="deleted_row_text">' + data[i]
                                                .folder_name + '</div>' +
                                            '</div>' +
                                            '</div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text deleted_file_width">' +
                                            data[i].file_name + '</div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text for_icon_retive"><a href="' +
                                            data[i].file +
                                            '" target="_blank"><i class="fa fa-download"  style="color:#00BFFF;cursor:pointer" aria-hidden="true"></i></a></div>' +
                                            '<div class="p-2 bd-highlight deleted_row_text for_icon_retive">' +
                                            '<div class="form-group form-check">' +
                                            '<input type="checkbox" class="form-check-input trash_check checkbox_checked" name ="trash_file_checked" value="' +
                                            data[i].file_id + '">'
                                        '</div>' +
                                            '</div>'


                                        $('#trash_tab_section').append(append_trash)
                                    }
                                }
                                // trash_form_data.delete('trash_files_ids')
                                // location.reload();
                                $('#ckbCheckAll').prop('checked', false);
                                detete_trash.length = 0;
                            },
                            error: function (xhr, errmsg, err) {
                                console.log(xhr);
                            },
                        });
                    },
                    cancel: function () {
                        alert('Canceled!')
                    }
                }
            });
        }
    </script>

    <!-- feedback modal -->
    <script>


        $('#feedback_btn').click(function () {
            //undo point
            //undo point remove

            $('#loader').show()
            var formdata = new FormData(document.getElementById('feedback_form'));
            var feedmail = formdata.get('feedmail')
            var feedtext = formdata.get('feedtext')
            //alert('Change password?')
            //console.log(formdata)
            //console.log(feedmail,feedtext)
            if (feedmail != "") {
                $.confirm({
                    title: 'Give FeedBack',
                    buttons: {
                        confirm: function () {
                            $.ajax({
                                type: 'POST',
                                cache: false,
                                contentType: false,
                                processData: false,
                                url: "{% url 'givefeedback'%}",
                                dataType: 'json',
                                data: formdata,
                                headers: {
                                    'X-CSRFToken': '{{csrf_token}}'
                                },
                                success: function (data) {
                                    if (data['status'] == 'Failed') {

                                        $.alert('Some error occured ')
                                        $('#feedmail').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#feedtext').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#feedModal').modal('hide')
                                    }
                                    else if (data['status'] == 'Success') {
                                        $.alert('Feedback Submitted ')
                                        $('#feedmail').val(function () {
                                            return this.defaultValue;
                                        });
                                        $('#feedtext').val(function () {
                                            return this.defaultValue;
                                        });

                                        $('#feedModal').modal('hide')
                                    }
                                },

                            });
                            $('#loader').hide()

                            //$("#change_password_form").submit();
                            //$("#change_password_form").ajaxSubmit({url: url, type: 'post'})
                        },
                        cancel: function () {
                            $('#loader').hide()
                            $.alert('Canceled!');
                            $('#password').val(function () {
                                return this.defaultValue;
                            });
                            $('#cnf_pass').val(function () {
                                return this.defaultValue;
                            });
                            $('#p_pass').val(function () {
                                return this.defaultValue;
                            });
                            $('#feedModal').modal('hide')
                        },
                    }
                });

            } else {
                $('#loader').hide()
                $.alert("Please enter feedback")
            }
        })


    </script>


<script>
//beta features script    
    $('#upload2').click(function () { // id of your button
        
        var formdata = new FormData(document.getElementById('uploadfrm2')); //id of your form
        console.log("form data",formdata)//printing form data
        if (formdata != "") {
            $.ajax({
                type: 'POST',
                cache: false,
                contentType: false,
                processData: false,
                url: '{% url "files_upload2" %}',// url name as defined in urls.py
                dataType: 'json',
                data: formdata, //passing the form data 
                headers: {
                    'X-CSRFToken': '{{csrf_token}}'
                },
                success: function (data) {   // data that is returned from views 
                    location.reload();
                    console.log(data['status'])
                    if (data['status'] == 'success') {
                        
                        console.log("success ")
                        location.reload(); 

                    }

                },
                error: function (xhr, errmsg, err) {
                    console.log(xhr);
                    
                },
            });
        }

    });


</script>
<script>
function trash_folder_restore(value){
        $.confirm({
            type: 'blue',
            typeAnimated: true,
            boxWidth: '70%',
            icon: 'fa fa-warning',
            title: 'Restore this Folder ?',
            buttons: {
                yes: function () {
                    var a = value;
                    $.ajax({
                        beforeSend: function () {
                            NProgress.start();
                        },
                        type: 'POST',
                        url: '{% url "restore_trash_folder" %}',
                        dataType: 'json',
                        data: {
                            folder_id: value
                        },
                        headers: {
                            'X-CSRFToken': '{{csrf_token}}'
                        },
                        success: function (data) {
                            console.log(data)
                            NProgress.done();
                            NProgress.remove();
                            deleteing_append
                                () //-- folder deletion function written in upper portion for dynamic appending of deleted files --//
                            var add_folder_id = '#' + data[0]
                            var main_panel = 'main_panel_' + add_folder_id
                            var modal_id = '#modalForm_' + add_folder_id
                            var default_image = '{%static "images/add_bttun.png" %}'
                            $('#append_dashboard_div').empty()
                            for (var i = 1, total = data.length; i < total; i++) {
                                var count = i;
                                folder_id = data[i].folder_id
                                folder_name = data[i].folder_name
                                var panel_append_id = '#panel_' + folder_id
                                $(panel_append_id).empty();
                                var compile_data = '<div class="d-flex bd-highlight">' +
                                    '<div class=" flex-grow-1 bd-highlight">' +
                                    '<button id="' + folder_id + '" class="accordion" >' +
                                    folder_name + '</button>' +
                                    '<div class="panel" id="main_panel_' + folder_id +
                                    '" >' +
                                    '<div style="margin-top: 20px;margin-bottom: 20px;">' +
                                    '<div class="d-flex bd-highlight ">' +
                                    '<div class="flex-grow-1 bd-highlight">' +
                                    '<div class="flex-container deai" id="' + folder_id +
                                    '" onclick="modal_open(' + folder_id + ')">' +
                                    '<div>' +
                                    '<img src="' + default_image + '" alt="">' +
                                    '</div>' +
                                    '<div class="edit_add_item">' +
                                    'Add Item' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class=" bd-highlight file_del_icon">' +
                                    '<a href="#/" id="file_folder_trash"><i class="fas fa-trash-alt" onclick ="item_delete({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                    '</div>' +
                                    '<div class=" bd-highlight">' +
                                    '<a href="#/" id="file_folder_trash"><i class="fa fa-window-restore" onclick ="item_restore({{item.folder_id}})"  style="font-size:22px;color:#708090;""></i></a>' +
                                    '</div>' +
                                    '<div class=" bd-highlight file_share_icon">' +
                                    '<a href="#/" id="file_folder_share"><i class="fa fa-share"  style="font-size:22px;color:#00FA9A;" aria-hidden="true"></i></a>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div id="panel_' + folder_id + '">' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class=" bd-highlight f_del_icn"><i class="fas fa-trash-alt" onclick="folder_del(' +
                                    folder_id +
                                    ')" style="font-size:20px;color:#708090;"></i></div>' +
                                    '<div class=" bd-highlight f_share_icn"><i class="fa fa-share"  style="font-size:20px;color:#00FA9A;" aria-hidden="true"></i></div>' +
                                    '</div>'



                                $('#append_dashboard_div').append(compile_data)
                                var acc = document.getElementsByClassName("accordion");
                                var j;
                                for (i = 0; i < acc.length; i++) {
                                    j = i;
                                    if (acc[i].classList.contains("active"))
                                        break;
                                }
                                acc[j].addEventListener("click", function () {
                                    this.classList.toggle("active");
                                    var panel = this.nextElementSibling;
                                    if (panel.style.maxHeight) {
                                        panel.style.maxHeight = null;
                                    } else {
                                        panel.style.maxHeight = panel.scrollHeight +
                                            "px";
                                    }
                                });

                                let childArray = data[i].products
                                for (let j = 0; j < childArray.length; j++) {
                                    var file_compile_data1;
                                    var file_id = childArray[j].file_id
                                    file_compile_data1 = '<div style="margin-top:15px;">' +
                                        '<div><!--new start-->' +
                                        '<div class="d-flex bd-highlight cc_bc_pb">' +
                                        '<div class="p-2 flex-grow-1 bd-highlight">' +
                                        '<div class="flex-container">' +
                                        '<div>' +
                                        '<a href="' + childArray[j].image +
                                        '" target="_blank"><img src="' + childArray[j]
                                            .image + '"  alt="" class="ppp_ccc_image">' +
                                        childArray[j].icon + '</a>' +
                                        '</div>' +
                                        '<div class="items">' + childArray[j].file_name +
                                        '</div>' +
                                        '</div>' +
                                        '</div>' +
                                        // '<div class="p-2 bd-highlight">'+
                                        // '<a href="#/"><i class="fas fa-trash-alt" onclick ="item_delete('+file_id+')" style="font-size:22px;color:#708090;""></i></a>'+
                                        // '</div>'+
                                        '<div class="p-2 bd-highlight">' +
                                        '<div class="form-group form-check">' +
                                        '<input type="checkbox" class="form-check-input check_style" name ="file_checked" value="' +
                                        file_id + '" id="file_checked_' + file_id + '">' +
                                        '</div>' +
                                        '</div>' +
                                        '</div><!--new end-->' +
                                        '</div>'

                                    $(panel_append_id).append(file_compile_data1);
                                }


                            }
                            // on successfull deletion main dashboard folders deleted , that has same folder id as response//
                            $(add_folder_id).remove()
                            $(main_panel).empty()
                            $(modal_id).remove()
                            $(main_panel).remove()
                            // $('.nav a[href="#pills-home"]').tab('show');
                            location.reload()

                        },
                        error: function (xhr, errmsg, err) {
                            console.log(xhr);
                        },
                    });
                    $.alert('Restore Successfully!');
                },
                No: function () {
                    $.alert('Canceled!');
                    // $('.nav a[href="#pills-home"]').tab('show');

                },
            }
        });

    }

</script>
<script>
    document.getElementById("restoreButton").addEventListener("click", function() {
        // Send a request to the Django API endpoint
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/api/restore-all/");
        xhr.onload = function() {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                alert(response.message);
            } else {
                alert("An error occurred while restoring files.");
            }
        };
        xhr.send();
    });
</script>

</body>

</html>